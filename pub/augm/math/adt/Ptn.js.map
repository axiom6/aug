{
  "version": 3,
  "file": "Ptn.js",
  "sourceRoot": "../../../../src/augm/math/adt",
  "sources": [
    "Ptn.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nimport {_,REST} from '../../../../lib/pub/util/Match.js'\nimport Ascii    from '../par/Ascii.esm.js'\n\nclass Ptn\n\n  @toPtn:(f) ->\n    a = undefined\n    if f is 'String'\n      a = String\n    else if f is 'Number'\n      a = Number\n    else if f is '_'\n      a = _\n    else if typeof(f) is 'function'\n      a = []\n      if f.name is 'Vec' or f.name is 'Mat'\n        a.push( f.name, REST )\n        # console.log( 'Ptn.toPtn() Vec', f.name, REST )\n      else\n        a.push(f.name)\n        a.push(_) for i in [0...f.length]\n    else\n      console.error( 'Ptn.toPtn() unknown pattern', f )\n    #console.log( 'Ptn.toPtn()', { f:f, ft:typeof(f), fa:Array.isArray(f), a:a, at:typeof(a), aa:Array.isArray(a) } )\n    return a\n\n  @type:(ptn) ->\n    if Array.isArray(ptn) then 'array' else typeof(ptn)\n\n  @toPtns:( adts ) =>\n    # console.log( 'Ptn.toPtns() adts', adts )\n    ptns = new Array(adts.length)\n    for i in [0...adts.length]\n      ptns[i] = if i%2 is 0 then @toPtn(adts[i]) else adts[i]\n    # for i in [0...ptns.length] by 2\n    #   console.log( 'Ptn.toPtns()', { ptn:ptns[i], type:Ptn.type(ptns[i]) } )\n    ptns\n\n  @parse:( ascii ) ->\n    sst = \"X\"\n    ast = []\n    err = {}\n    try\n      sst = Ascii.parse( ascii )\n      try\n        ast = eval( sst )\n      catch e\n        console.error( 'Ptn.parse() eval  error', key, e )\n    catch e\n      err.found = e.found; err.msg = e.message; err.loc = e.location\n      console.error( 'Ptn.doParse() parse error', { key:key, ascii:ascii, error:err } )\n    ast\n\n  @toSst:( ast ) ->\n    sst = \"[\"\n    for i in [0...ast.length] when ast[i]?\n      sst += if Array.isArray(ast[i]) then Ptn.toSst(ast[i]) else ast[i].toString()\n      sst += ',' if i < ast.length-1\n    sst += \"]\"\n    sst\n\nexport default Ptn"
  ]
}