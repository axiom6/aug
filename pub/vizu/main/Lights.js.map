{
  "version": 3,
  "file": "Lights.js",
  "sourceRoot": "../../../src/vizu/main",
  "sources": [
    "Lights.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nimport { AmbientLight, DirectionalLight, DirectionalLightHelper,\n  SpotLight, SpotLightHelper, Object3D, HemisphereLight } from 'three'\n\nclass Lights\n\n  constructor:( @main ) ->\n    @klass        = @constructor.name\n    @opts         = @main.opts.lights\n    @cc           = @main.cartesian\n    @lightHelpers = [] # Light Helpers are pushed into this array for animate updates\n    @lights       = @selectLight( @opts, @cc ) # An array\n    @main.log( @klass+'()', @ )\n\n  selectLight:( opts, cc ) ->\n    return @ambient( opts ) if not opts? and not opts.light?\n    switch opts.light\n      when 'Ambient'      then @ambient(      opts     )\n      when 'SpotLight'    then @spotlight(    opts     )\n      when 'Directional'  then @directional(  opts, cc )\n      when 'Hemisphere'   then @hemisphere(            )\n      when 'DirectColor'  then @directColor(  opts, cc )\n      when 'Muse'         then @muse(         opts     )\n      when 'Orthographic' then @orthographic( opts, cc )\n      else\n        console.log( 'Lights.selectLight() unknown light', opts.light )\n        @ambient( opts )\n\n  ambient:( opts ) ->\n    color     = if opts.color? then opts.color?         else 0xFFFFFF\n    intensity = if opts.intensity? then opts.intensity? else 1.0\n    light     = new AmbientLight( color, intensity )\n    light.position.set( 1, 1, 1 ).normalize()\n    @main.addToScene(light)\n    [light]\n\n  spotlight:( opts ) ->\n    color     = if opts.color?     then opts.color?     else 0xFFFFFF\n    intensity = if opts.intensity? then opts.intensity? else 1.0\n    light            = new SpotLight( color, intensity )\n    light.castShadow = true\n    light.angle      = 0.3\n    light.penumbra   = 0.2\n    light.decay      = 2\n    light.distance   = 50\n    @main.addToScene(light)\n    if opts.helper? and opts.helper\n      helper = new SpotLightHelper( light )\n      @main.addToScene( helper )\n    [light]\n\n  hemisphere:(  ) ->\n    light1 = new HemisphereLight( 0xffffff, 0x000088 )\n    light2 = new HemisphereLight( 0xffffff, 0x880000, 0.5 )\n    light1.position.set( -1,  1.5,  1 )\n    light2.position.set( -1, -1.5, -1 )\n    @main.addToScene( light1, light2 )\n    [ light1, light2 ]\n\n  muse:( opts ) ->\n\n    if opts then false\n\n    backLight  = new DirectionalLight( 'white', 0.15 )\n    backLight.position.set(6,3,9)\n    backLight.name = 'Back light'\n    @main.addToScene( backLight )\n\n    keydLight = new DirectionalLight( 'white', 0.35 );\n    keydLight.position.set(-6, -3, 0)\n    keydLight.name   = 'Key light'\n    @main.addToScene( keydLight )\n\n    fillLight = new DirectionalLight( 'white', 0.55 )\n    fillLight.position.set(9, 9, 6)\n    fillLight.name = 'Fill light'\n    @main.addToScene( fillLight )\n\n    spotLight = new SpotLight( 0xffffff )\n    spotLight.position.set( 3, 30, 3 )\n    spotLight.castShadow = true\n    spotLight.shadow.mapSize.width  = 2048\n    spotLight.shadow.mapSize.height = 2048\n    spotLight.shadow.camera.near    = 1\n    spotLight.shadow.camera.far     = 4000\n    spotLight.shadow.camera.fov     = 45\n    @main.addToScene( spotLight )\n    [ backLight, keydLight, fillLight, spotLight ]\n\n  orthographic:( opts, cc ) ->\n    spotLightXY = new SpotLight( 0xFF7F00, 2 )\n    spotLightXY.castShadow = true\n    targetXY    = new Object3D()\n    spotLightXY.position.set( cc.xc, cc.yc, cc.zd*2.0 )\n    targetXY.position.set(    cc.xc, cc.yc, cc.zmin   )\n    spotLightXY.angle  = 0.36\n    spotLightXY.target = targetXY\n    console.log( \"Lights.spotLightXY.position\", spotLightXY.position, targetXY.position )\n    spotHelperXY  = new SpotLightHelper( spotLightXY )\n    @lightHelpers.push( spotHelperXY )  # We do this for updates in @animate\n    @main.addToScene(   spotLightXY, spotLightXY.target, spotHelperXY  )\n    [ spotLightXY ]\n\n  directional:( opts, cc ) ->\n    xy = @directPlane( opts, cc, 'XY' )\n    xz = @directPlane( opts, cc, 'XZ' )\n    yz = @directPlane( opts, cc, 'YZ' )\n    [ xy, xz, yz ]\n\n  directPlane:( opts, cc, plane, castShadow=true ) ->\n    direct = new DirectionalLight( cc.hex(plane), 2 )  # [60,90,90] 0xFF7F00\n    target = new Object3D()\n    dist = switch plane\n      when 'XY'\n        direct.position.set( cc.xc, cc.yc, cc.zd*2.0 )\n        target.position.set( cc.xc, cc.yc, cc.zmin   )\n        cc.zd\n      when 'XZ'\n        direct.position.set( cc.xc, cc.yd*2.0, cc.zc )\n        target.position.set( cc.xc, cc.ymin,   cc.zc )\n        cc.yd\n      when 'YZ'\n        direct.position.set( cc.xd*2.0, cc.yc, cc.zc )\n        target.position.set( cc.xmin,   cc.yc, cc.zc )\n        cc.xd\n    direct.castShadow            =  castShadow\n    direct.shadow.camera.left    = -dist * cc.aspect\n    direct.shadow.camera.right   =  dist * cc.aspect\n    direct.shadow.camera.top     = -dist\n    direct.shadow.camera.bottom  =  dist\n    direct.shadow.camera.near    = -dist * 5.0\n    direct.shadow.camera.far     =  dist * 5.0\n    direct.target = target\n    helper        = new DirectionalLightHelper( direct )\n    @lightHelpers.push( helper )  # We do this for updates in @animate\n    @main.addToScene(   direct, direct.target, helper )\n    [ direct ]\n\n  directColor:( opts, cc ) ->\n    xy = @directPlane( opts, cc, 'XY', false )\n    [ xy ]\n\n  directColor2:( opts, cc ) ->\n    xy = @directPlane( opts, cc, 'XY', false )\n    xz = @directPlane( opts, cc, 'XZ', false )\n    [ xy, xz ]\n\n\nexport default Lights\n"
  ]
}