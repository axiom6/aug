{
  "version": 3,
  "file": "Manager.js",
  "sourceRoot": "../../../src/data/store",
  "sources": [
    "Manager.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nimport Memory from '../../../lib/pub/base/store/Memory.js'\nimport Local  from '../../../lib/pub/base/store/Local.js'\nimport Index  from '../../../lib/pub/base/store/Index.js'\nimport Fire   from '../../../lib/pub/base/store/Fire.js'\nimport Couch  from '../../../lib/pub/base/store/Couch.js'\n\nclass Manager\n\n  constructor:( @mix ) ->\n    @dbName     = 'test1'\n    @credsUrl   = 'http://admin:athena@127.0.0.1:5984' # Admin host to couchdb\n    @couchUrl   = 'http://127.0.0.1:5984'              # Admin host to couchdb\n    @stream     = mix.stream()\n    @Prac       = null\n    @Hues       = null\n    @Kit        = null\n    @source     = null\n\n  test:( name ) ->\n\n    @store = switch name\n      when 'Local'  then new Local(  @stream, @dbName )\n      when 'Index'  then new Index(  @stream, @dbName )\n      when 'Fire'   then new Fire(   @stream, @dbName )\n      when 'Couch'  then new Couch(  @stream, @dbName, @couchUrl )\n      when 'Memory' then new Memory( @stream, @dbName )\n      else\n        console.error( 'Manager.test() unknown name', name )\n        null\n\n    @source = @store.source\n    @store.openTable( 'Prac')\n    @store.openTable( 'Hues')\n    @openIndex( @store ) if name is   'Index'\n    @suite()             if name isnt 'Index'\n\n    return\n\n  openIndex:( idb ) ->\n    idb.openDB( idb.dbName, idb.dbVersion )\n       .then(  (db) =>\n          idb.db   = db\n          @suite( idb )\n          return )\n       .catch( (error) =>\n         idb.onerror( idb.tables, 'openDB', error )\n         return )\n    return\n\n  subscribe:( table, op ) =>\n    onSubscribe = ( obj ) =>\n      console.log( 'Mgr', { table:table, op:op, source:@source, obj:obj } )\n      whereS = (obj) -> true\n      whereD = (obj) -> obj.column is 'Embrace'\n      switch op\n        when 'add'    then @store.get(    table, obj.id )\n        when 'put'    then @store.del(    table, obj.id )\n        when 'insert' then @store.select( table, whereS )\n        when 'update' then @store.remove( table, whereD )\n\n    @store.subscribe(   table, op, @store.source, onSubscribe )\n    return\n\n  suite:() ->\n\n    console.log( 'Manager.suite()', @store.source )\n\n    @data()\n\n    @subscribe( 'Prac',   'add' )\n    @subscribe( 'Prac',   'get' )\n    @subscribe( 'Prac',   'put' )\n    @subscribe( 'Prac',   'del' )\n\n    @subscribe( 'Hues', 'insert' )\n    @subscribe( 'Hues', 'select' )\n    @subscribe( 'Hues', 'update' )\n    @subscribe( 'Hues', 'remove' )\n\n    @subscribe( 'Tables', 'show' )\n    @subscribe( 'Prac',   'open' )\n    @subscribe( 'Prac',   'drop' )\n\n    @store.show()\n\n    @store.add( 'Prac', @Prac.id, @Prac )\n    #tore.get( 'Prac', @Prac.id )         # Called after add\n    @store.put( 'Prac', @Prac.id, @Prac )\n    #tore.del( 'Prac', @Prac.id )         # Called after put\n\n    @store.insert( 'Hues', @Hues )\n    #tore.select( 'Hues', (obj) -> true ) # Called after insert\n\n    @Hues['Green'].column  = 'Embrace'\n    @Hues['Orange'].column = 'Embrace'\n    @Hues['Violet'].column = 'Embrace'\n    @store.update( 'Hues', @Hues )\n\n    #here = (obj) -> obj.column is 'Embrace'  # Called after update\n    #tore.remove( 'Hues', where )\n    #console.log( \"Manager.test()\", { subjects:@store.stream.subjects } )\n    return\n\n  data:() ->\n\n    @Prac = { \"_id\":\"Involve\", \"id\":\"Involve\", \"table\":\"prac\",\"type\":\"pane\", \"hsv\":[195,90,60],\"column\":\"Embrace\",\n    \"row\":\"Learn\",\"plane\":\"Know\",\"icon\":\"fas fa-users\",\n    \"cells\":[5,12,7,12], \"dir\":\"nw\", \"neg\":\"Greed\" }\n\n    @Hues  = @mix.data( 'Hues' )\n    # console.log( 'Manager.data(@Pracs)', @mix, @Hues )\n\n    @Kit = { \"_id\":\"mittens\", \"name\": \"Mittens\", \"occupation\": \"kitten\", \"age\": 3,\n    \"hobbies\": [ \"playing with balls of yarn\", \"chasing laser pointers\", \"lookin' hella cute\" ] }\n\nexport default Manager"
  ]
}