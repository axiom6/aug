{
  "version": 3,
  "file": "DealsUC.js",
  "sourceRoot": "../../../src/exit/uc",
  "sources": [
    "DealsUC.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nimport $     from 'jquery'\nimport Util  from '../util/Util.js'\n\nclass DealsUC\n\n  constructor:( @stream, @role, @port, @land ) ->\n    @etaHoursMins = '?'\n    @uom = 'em'\n    Util.noop( @iAmExiting )\n\n  ready:() ->\n    @$ = $( @html() )\n\n  position:(   screen ) ->\n    @onScreen( screen )\n    @subscribe()\n\n  html:() ->\n    \"\"\"<div id=\"#{Util.id('DealsUC',@role)}\" class=\"#{Util.css('DealsUC')}\"></div>\"\"\"\n\n  subscribe:() ->\n    @stream.subscribe( 'Trip',        'DealsUC', (trip)        => @onTrip(trip)              )\n    @stream.subscribe( 'Location',    'DealsUC', (location)    => @onLocation(location)      )\n    @stream.subscribe( 'Screen',      'DealsUC', (screen)      => @onScreen(screen)          )\n    @stream.subscribe( 'Deals',       'DealsUC', (deals)       => @onDeals(deals)            )\n    #@stream.subscribe( 'Conditions', 'DealsUC', (conditions)  => @onConditions( conditions) )\n\n  onTrip:( trip ) ->\n    @etaHoursMins = trip.etaHoursMins()\n    @onDeals( trip.deals )\n\n  onLocation:( location ) ->\n    Util.noop( 'DealsUC.onLocation()', @ext, location )\n\n  onScreen:( screen ) ->\n    Util.cssPosition( @$, screen, @port, @land )\n\n  onConditions:( conditions ) ->\n    Util.noop( 'Deals.onConditions()', conditions )\n\n  onDeals:( deals ) ->\n    #Util.dbg( 'DealsUI.onDeals()', deals[0].exit )\n    html = @dealsHtml( \"Exit Now\", 'Traffic Slow', @etaHoursMins, deals )\n    @$.append( html )\n    @enableTakeDealClick( deal._id ) for deal in deals\n\n# placement is either Go NoGo Gritter Deals - This is a hack for now\n  dealsHtml:( title, traffic, eta, deals ) ->\n    @uom = 'em'\n    html  = ''\n    html += @dealsTitle(      title,        1.00 )\n    html += @dealsTrafficEta( traffic, eta, 0.75 )\n    html += @dealHtml( deal, 0.80, true ) for deal in deals\n    html += \"\"\"</div>\"\"\"  # Closes main centering div fron @dealTitle()\n    html\n\n  dealsTitle:( title, fontSize ) ->\n    \"\"\"<div style=\"text-align:center;\">\n         <div style=\"font-size:#{@fs(fontSize)};\">#{title}</div>\"\"\"\n\n  dealsTrafficEta:( traffic, eta, fontSize ) ->\n    \"\"\"<div style=\"font-size:#{@fs(fontSize)};\"><span>#{traffic}</span><span style=\"font-weight:bold;\"> #{eta}</span></div>\"\"\"\n\n  dealHtml:( deal, fontSize, take ) ->\n    padding  = 0.2 * fontSize\n    takeSize = 1.0 * fontSize\n    html  = \"\"\"<hr  style=\"margin:#{@fs(padding)}\"</hr>\"\"\"\n    html += \"\"\"<div style=\"font-size:#{@fs(fontSize)};\">#{deal['dealData'].name}</div>\n               <div style=\"font-size:#{@fs(fontSize)};\"><span>#{deal['dealData']['businessName']}</span>#{@takeDeal(deal._id,takeSize,padding,take)}</div>\"\"\"\n    html\n\n  fs:(size) ->\n    size+@uom\n\n  takeDeal:( dealId, fontSize, padding, take ) ->\n    if take\n      style = \"font-size:#{@fs(fontSize)}; margin-left:#{@fs(fontSize)}; padding:#{@fs(padding)}; border-radius:#{@fs(padding*2)}; background-color:#E2492F; color:white;\"\n      \"\"\"<span dataid=\"#{dealId}\" style=\"#{style}\">Take Deal</span>\"\"\"\n    else\n      ''\n\n  enableTakeDealClick:( dealId ) ->\n    @$.find(\"[dataid=#{dealId}]\").click( () =>\n      Util.dbg( 'Deal.TakeDeal', dealId )\n      @stream.publish(  'TakeDeal', dealId ) )\n\n  iAmExiting:( dataId ) ->\n    \"\"\"<div style=\"margin-top:0.5em;\"><span dataid=\"#{dataId}\" style=\"font-size:0.9em; padding:0.3em; background-color:#658552; color:white;\">I'M EXITING</span></div></div>\"\"\"\n\n\n`export default DealsUC`"
  ]
}