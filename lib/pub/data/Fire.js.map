{
  "version": 3,
  "file": "Fire.js",
  "sourceRoot": "../../src/data",
  "sources": [
    "Fire.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nimport Store    from './Store.js'\nimport firebase from 'firebase'\n\nclass Fire extends Store\n\n  constructor:( stream, dbName ) ->\n    super(      stream, dbName )\n    @init( @config() )\n    @fd = firebase.database()\n\n  # https://console.firebase.google.com/project/data-muse/overview\n  config:() -> {\n    apiKey: \"AIzaSyDuWZIanBoKVZiPTcxDMQ9HyC2Ak3cr7j8\",\n    authDomain: \"data-muse.firebaseapp.com\",\n    databaseURL: \"https://data-muse-default-rtdb.firebaseio.com\",\n    projectId: \"data-muse\",\n    storageBucket: \"data-muse.appspot.com\",\n    messagingSenderId: \"782871064051\",\n    appId: \"1:782871064051:web:a4914c83e898b45e7c7686\"\n  }\n\n  init:( config ) ->\n    firebase.initializeApp(config)\n    return\n\n  add:( table, id, obj ) ->\n    @fd.ref(table+'/'+id).set( obj )\n       .then(  (snaps) => @results( table, 'add', obj   ) )\n       .catch( (error) => @onerror( table, 'add', error, id ) )\n    return\n\n  get:( table, id, callback ) ->\n    @fd.ref(table+'/'+id).once('value' )\n       .then(  (snaps) => @firemsg( table, 'get', snaps, null, callback ) )\n       .catch( (error) => @onerror( table, 'get', error, id ) )\n    return\n\n  put:( table, id,  obj ) ->    # Same as add\n    @fd.ref(table+'/'+id).set( obj )\n       .then(  (snaps) => @results( table, 'put', obj   ) )\n       .catch( (error) => @onerror( table, 'put', error, id ) )\n    return\n\n  del:( table, id ) ->\n    @fd.ref(table+'/'+id).remove()\n       .then(  ()      => @firemsg( table,'del', {} ) )\n       .catch( (error) => @onerror( table,    'del', error, id ) )\n    return\n\n  select:( table, where, callback=null ) ->\n    @fd.ref(table).once('value')\n       .then(  (snaps) => @firemsg( table, 'select', snaps, where, callback ) )\n       .catch( (error) => @onerror( table, 'select', error ) )\n    return\n\n  insert:( table, objs) ->\n    @fd.ref(table).set( objs )\n       .then(  (snaps) => @results( table, 'insert', objs  ) )\n       .catch( (error) => @onerror( table, 'insert', error ) )\n    return\n\n  update:( table, objs ) ->\n    @fd.ref(table).update( objs )\n       .then(  (snaps) => @results( table, 'update', objs   ) )\n       .catch( (error) => @onerror( table, 'update', error  ) )\n    return\n\n  remove:( table, where) ->\n    @fd.ref(table).once('value')\n       .then( (snaps) =>\n          if @isSnaps(snaps)\n            objs = @toObjects( snaps.val(), where )\n            for own key, obj of objs when where(obj)\n              @del( table, key ) # @fd.ref(table+'/'+key).remove()\n            @results( table, 'remove', objs ) )\n        .catch( (error) => @onerror( table, 'remove', error ) )\n    return\n\n  show:() ->\n    @showTables()\n    return\n\n  open:( table ) ->\n    @openTable( table )\n    return\n\n  # ref.remove() is Dangerous and has removed all tables in Firebase\n  drop:( table ) ->\n    @dropTable( table )\n    @fd.ref(table).remove()\n       .then(  (snaps) => @firemsg( table, 'drop', snaps ) )\n       .catch( (error) => @onerror( table, 'drop', error ) )\n    return\n\n  # Have too clarify id with snapshot.key\n  change:( table, id='none', callback=null, Event='put' ) ->\n    path  = if id is 'none' then table else table + '/' + id\n    @fd.ref(path).on( Fire.EventType[Event] ) # , onChange\n       .then(  (snaps) => @firemsg( table, 'change', snaps, null, callback ) )\n       .catch( (error) => @onerror( table, 'change', error ) )\n    return\n\n  range:( table, beg, end ) ->\n    @fd.ref(table).orderByKey().startAt(beg).endAt(end).once('value' )\n      .then( (snaps) => @firemsg( table, 'range', snaps ) )\n      .catch( (error) =>@onerror( table, 'range', error ) )\n    return\n\n  firemsg:( table, op, snaps, query=null, callback=null ) ->\n    where = if query? then query else (obj)->true\n    objs  = if @isSnaps(snaps) then @toObjects( snaps.val(), where ) else snaps\n    if callback? then callback(objs) else @results( table, op, objs )\n    return\n\n  isSnaps:( snaps ) ->\n    snaps? and snaps.val? and snaps.key?\n\n# Sign Anonymously\n  auth:( ) ->\n    @fb.auth().signInAnonymously()\n       .then ( (creds) => @results( 'auth', 'auth', creds ) )\n       .catch( (error) => @onerror( 'auth', 'auth', error ) )\n    return\n\nFire.EventType  = { get:\"value\", add:\"child_added\", put:\"child_changed\", del:\"child_removed\" }\n\nexport default Fire\n\n###\nimport firebase from 'firebase'\n\nclass Fire extends Store\n\n  constructor:( stream, dbName ) ->\n    super(      stream, dbName )\n    @init( @config() )\n    @fd = firebase.database()\n\n  =====\n\n  import { initializeApp } from 'firebase/app'\n  import { Database      } from 'firebase/database'\n\n  class Fire extends Store\n\n  constructor:( stream, dbName ) ->\n    super(      stream, dbName )\n    @fireApp = initializeApp( @config() )\n    @fd = Database( @fireApp )\n###\n\n"
  ]
}