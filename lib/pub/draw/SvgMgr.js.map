{
  "version": 3,
  "file": "SvgMgr.js",
  "sourceRoot": "../../src/draw",
  "sources": [
    "SvgMgr.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nimport * as d3  from 'd3'\nimport { vis  } from '../draw//Vis.js'\n\nclass SvgMgr\n\n  constructor:( @name, @elem, @level ) ->\n    @d3    = d3\n    @size  = @sizeElem( @elem, @level )\n    @origWidth  = @size.w\n    @origHeight = @size.h\n    @svgId = @htmlId( @name, 'Svg',  '' )\n    @gId   = @htmlId( @name, 'SvgG', '' )\n    @svg   = @d3.select(@elem).append(\"svg:svg\")\n    @svg.attr(\"id\",@svgId)\n        .attr(\"width\",@size.w).attr(\"height\",@size.h)\n        .attr(\"xmlns\",\"http://www.w3.org/2000/svg\")\n    @defs = @svg.append(\"svg:defs\")\n    @g    = @svg.append(\"svg:g\").attr(\"id\",@gId) # All transforms are applied to g\n    window.onresize = @resize\n\n  htmlId:( name, type, ext='' ) ->\n    name + type + ext\n\n  sizeElem:( elem, level ) ->\n    sz = {}\n    sz.w          =   elem['clientWidth' ]\n    sz.h          =   elem['clientHeight']\n    sz.windWidth  = window['innerWidth' ]\n    sz.windHeight = window['innerHeight']\n    sz.xc         = sz.w * 0.5\n    sz.yc         = sz.h * 0.5\n    sz.sx         = if @origWidth  then sz.w / @origWidth  else 1.0\n    sz.sy         = if @origHeight then sz.h / @origHeight else 1.0\n    sz.smin       = Math.min( sz.sx, sz.sy )\n    sz.smax       = Math.max( sz.sx, sz.sy )\n    sz.s          = sz.smin\n    sz.r          = Math.min( sz.w,  sz.h ) * 0.2  # Used for hexagons\n    sz.level      = level\n    sz.scaleFont  = sz.h / 100\n    sz.ringSize   = sz.w / 13 # if sz.level is 'Comp' then 24 else 6*sz.scaleFont\n    sz.ringIcon   = 12.0*sz.scaleFont\n    sz.iconSize   = 20.0*sz.scaleFont+'px'\n    sz.bannSize   = if sz.level is 'Comp' then 11.0*sz.scaleFont+'px' else 9.0*sz.scaleFont+'px'\n    sz.pracSize   = 10.0*sz.scaleFont+'px'\n    sz.dispSize   =  7.0*sz.scaleFont+'px'\n    sz.iconDy     = if sz.level is 'Comp' then  7.5*sz.scaleFont else 7.5*sz.scaleFont\n    sz.bannDy     = if sz.level is 'Comp' then  2.0*sz.scaleFont                else 0\n    sz.pracDy     = 0\n    sz.dispDy     = if sz.level is 'Comp' then  0                else 0\n    # console.log( 'SvgMgr.sizeElem()', sz )\n    sz\n\n  resize:() =>\n    sz = @sizeElem( @elem )\n    @svg.attr( \"width\", sz.w ).attr( \"height\", sz.h )\n    @g.transition().attr(\"transform\", \"\"\"scale(#{sz.smin})\"\"\" )\n    return\n\n  resize2:() =>\n    sz = @sizeElem( @elem )\n    @svg.attr( \"width\", sz.w ).attr( \"height\", sz.h )\n    trans = @g.attr(\"transform\")\n    if trans? and trans.includes(\"translate\")\n      @g.transition().attr(\"transform\", \"\"\"translate(#{sz.xc},#{sz.yc}) scale(#{sz.s})\"\"\" )\n    else\n      @g.transition().attr(\"transform\", \"\"\"scale(#{sz.s})\"\"\" )\n    return\n\n  toFill:( hsv ) ->\n    vis.str( hsv, 'ysv' )\n\n  clearSvg:() ->\n    @svg.selectAll(\"*\").remove()\n    @svg.remove()\n    return\n\nexport default SvgMgr"
  ]
}