{
  "version": 3,
  "file": "Nav.js",
  "sourceRoot": "../../../src/base/nav",
  "sources": [
    "Nav.coffee"
  ],
  "names": [],
  "mappings": "AACA,IAAA,GAAA;EAAA;;AAAA,OAAO,KAAP,MAAA;;AACA,OAAO,GAAP,MAAA;;AAEM,MAAN,MAAA,IAAA;EAEE,WAAY,OAAA,KAAA,UAAwB,CAAA,CAAxB,WAAmC,IAAnC,WAAgD,CAAA,CAAhD,CAAA;QA8FZ,CAAA,YAAA,CAAA;IA9Fc,IAAC,CAAA;IAAQ,IAAC,CAAA;IAAK,IAAC,CAAA;IAAU,IAAC,CAAA;IAAY,IAAC,CAAA;IACpD,IAAC,CAAA,IAAD,GAAc;MAAE,IAAA,EAAK,IAAP;MAAa,IAAA,EAAK,IAAlB;MAAwB,KAAA,EAAM,IAA9B;MAAoC,KAAA,EAAM,IAA1C;MAAgD,IAAA,EAAK,IAArD;MAA2D,IAAA,EAAK;IAAhE;IACd,IAAC,CAAA,IAAD,GAAiB,IAAC,CAAA,KAAJ,GAAe,IAAC,CAAA,aAAD,CAAgB,IAAC,CAAA,KAAjB,CAAf,GAA6C;IAC3D,IAAC,CAAA,KAAD,GAAe;IACf,IAAC,CAAA,KAAD,GAAe,IAAI,KAAJ,CAAW,IAAC,CAAA,KAAZ;IACf,IAAC,CAAA,GAAD,GAAe,IAAI,GAAJ,CAAS,IAAT;IACf,IAAC,CAAA,MAAD,GAAc;IACd,IAAC,CAAA,KAAD,GAAc,OANlB;IAOI,IAAC,CAAA,OAAD,GAAc;IACd,IAAC,CAAA,OAAD,GAAc;IACd,IAAC,CAAA,OAAD,GAAc;IACd,IAAC,CAAA,OAAD,GAAc;IACd,IAAC,CAAA,OAAD,GAAc,OAXlB;IAYI,IAAC,CAAA,MAAD,GAAc;IACd,IAAC,CAAA,OAAD,GAAc;IACd,IAAC,CAAA,OAAD,GAAc;IACd,IAAC,CAAA,KAAD,GAAe;IACf,IAAC,CAAA,IAAD,GAAc;IACd,IAAC,CAAA,IAAD,GAAc;IACd,IAAC,CAAA,IAAD,GAAc,CAAA;IACd,IAAC,CAAA,UAAD,GAAc,CAAC,MAAD,EAAQ,MAAR,EAAe,MAAf;IACd,IAAC,CAAA,SAAD,GAAc,CAAC,MAAD,EAAQ,MAAR,EAAe,MAAf,EAAsB,MAAtB,EAA6B,MAA7B,EAAoC,MAApC,EAA2C,MAA3C;IACd,IAAC,CAAA,SAAD,GAAc,CAAC,MAAD,EAAQ,MAAR,EAAe,MAAf,EAAsB,MAAtB,EAA6B,MAA7B,EAAoC,MAApC,EAA2C,MAA3C;IACd,IAAC,CAAA,UAAD,GAAc,CAAC,MAAD,EAAQ,MAAR,EAAe,MAAf;EAvBJ;;EAyBZ,GAAI,CAAE,GAAF,EAAO,WAAS,KAAhB,CAAA;AACN,QAAA,UAAA,EAAA,GAAA,EAAA;IAAI,UAAA,GAAa,IAAC,CAAA,UAAD,CAAa,GAAb;IACb,GAAA,GAAM,IAAC,CAAA,KAAD,CAAQ,GAAR;IACN,GAAA,GAAM,IAAC,CAAA,KAAD,CAAQ,GAAR;IACN,OAAO,CAAC,GAAR,CAAY,WAAZ,EAAyB,GAAzB;IACA,IAAmB,CAAI,QAAJ,IAAiB,GAAG,CAAC,OAAJ,KAAiB,MAArD;MAAA,IAAC,CAAA,IAAI,CAAC,IAAN,CAAW,GAAX,EAAA;;IACA,IAAmB,CAAI,QAAJ,IAAiB,GAAG,CAAC,OAAJ,KAAiB,MAArD;MAAA,IAAC,CAAA,IAAI,CAAC,IAAN,CAAW,GAAX,EAAA;;IACA,IAAkC,UAAlC;MAAA,IAAC,CAAA,MAAM,CAAC,OAAR,CAAiB,MAAjB,EAAyB,GAAzB,EAAA;;IACA,IAAC,CAAA,MAAM,CAAC,OAAR,CAAiB,KAAjB,EAAyB,GAAzB;EARE;;EAWJ,UAAW,CAAE,GAAF,CAAA;AACb,QAAA;IAAI,IAA0B,CAAI,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,GAAG,CAAC,OAAf,CAA9B;MAAA,GAAG,CAAC,OAAJ,GAAc,IAAC,CAAA,QAAf;;IACA,IAA0B,CAAI,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,GAAG,CAAC,OAAf,CAA9B;MAAA,GAAG,CAAC,OAAJ,GAAc,IAAC,CAAA,QAAf;;IACA,IAA0B,CAAI,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,GAAG,CAAC,OAAf,CAA9B;MAAA,GAAG,CAAC,OAAJ,GAAc,IAAC,CAAA,QAAf;;IACA,MAAA,GAAS,CAAI,CAAE,GAAG,CAAC,OAAJ,KAAe,IAAC,CAAA,OAAhB,IAA4B,GAAG,CAAC,OAAJ,KAAe,IAAC,CAAA,OAA5C,IAAwD,GAAG,CAAC,OAAJ,KAAe,IAAC,CAAA,OAA1E;IACb,IACqF,IAAC,CAAA,KAAD,IAAW,MADhG;MAAA,OAAO,CAAC,GAAR,CAAa,kBAAb,EAAiC;QAAE,MAAA,EAAO,MAAT;QAAiB,OAAA,EAAQ,GAAG,CAAC,OAA7B;QAAsC,OAAA,EAAQ,IAAC,CAAA,OAA/C;QACjC,OAAA,EAAQ,GAAG,CAAC,OADqB;QACZ,OAAA,EAAQ,IAAC,CAAA,OADG;QACM,OAAA,EAAQ,GAAG,CAAC,OADlB;QAC2B,OAAA,EAAQ,IAAC,CAAA;MADpC,CAAjC,EAAA;;WAEA;EAPS;;EASX,KAAM,CAAE,GAAF,CAAA;AACR,QAAA;IAAI,IAAC,CAAA,GAAD,CAAM,GAAN;IACA,IAA0B,kBAA1B;MAAA,IAAC,CAAA,MAAD,GAAY,OAAZ;;IACA,IAAsB,IAAC,CAAA,KAAD,KAAY,MAAlC;MAAA,IAAC,CAAA,OAAD,GAAY,OAAZ;;IACA,IAAsB,IAAC,CAAA,KAAD,KAAY,MAAlC;MAAA,IAAC,CAAA,OAAD,GAAY,OAAZ;;IACA,GAAA,GAAM;MAAE,MAAA,EAAO,IAAC,CAAA,MAAV;MAAkB,KAAA,EAAM,IAAC,CAAA,KAAzB;MAAgC,OAAA,EAAQ,IAAC,CAAA,OAAzC;MAAkD,OAAA,EAAQ,IAAC,CAAA,OAA3D;MAAoE,OAAA,EAAQ,IAAC,CAAA;IAA7E;IACN,GAAG,CAAC,OAAJ,GAAc,IAAC,CAAA,OAAD,CAAU,GAAV;IACd,GAAG,CAAC,OAAJ,GAAc,IAAC,CAAA,OAAD,CAAU,GAAV;IACd,IAA0B,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,QAAX,CAA1B;MAAA,GAAG,CAAC,MAAJ,GAAc,IAAC,CAAA,OAAf;;IACA,IAA0B,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,QAAX,CAA1B;MAAA,GAAG,CAAC,OAAJ,GAAc,IAAC,CAAA,QAAf;;IACA,IAA0B,IAAC,CAAA,OAAD,KAAc,MAAxC;MAAA,GAAG,CAAC,OAAJ,GAAc,IAAC,CAAA,QAAf;;IACA,IAAC,CAAA,GAAD,CAAM,GAAN,EAVJ;WAWI;EAZI;;EAcN,GAAI,CAAE,GAAF,CAAA;AACN,QAAA,GAAA,EAAA;IAAI,KAAA,UAAA;;;MACE,IAAC,CAAC,GAAD,CAAD,GAAS;IADX;EADE;;EAKJ,GAAI,CAAE,GAAF,CAAA;AAEN,QAAA;IAAI,IAAG,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,GAAG,CAAC,OAAf,CAAH;MACE,IAAC,CAAA,OAAD,GAAY,GAAG,CAAC;MAChB,OAAA,GAAY,IAAC,CAAA,UAAD,CAAY,GAAZ;MACZ,IAAC,CAAA,UAAD,CAAa,OAAb,EAAsB,GAAG,CAAC,OAA1B,EAAmC,CAAA,CAAnC,EAFN;MAGM,IAAC,CAAA,MAAM,CAAC,OAAR,CAAiB,KAAjB,EAAkC;QAAE,OAAA,EAAQ,OAAV;QAAmB,OAAA,EAAQ,GAAG,CAAC;MAA/B,CAAlC;MACA,IAAgF,IAAC,CAAA,KAAjF;QAAA,OAAO,CAAC,GAAR,CAAa,mBAAb,EAAkC;UAAE,OAAA,EAAQ,OAAV;UAAmB,OAAA,EAAQ,GAAG,CAAC;QAA/B,CAAlC,EAAA;OALF;;IAOA,IAAG,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,GAAG,CAAC,OAAf,CAAH;MACE,IAAC,CAAA,OAAD,GAAY,GAAG,CAAC;MAChB,IAAC,CAAA,UAAD,CAAa,GAAG,CAAC,OAAjB,EAA0B,GAAG,CAAC,OAA9B,EAAuC,CAAA,CAAvC,EADN;MAEM,IAAC,CAAA,MAAM,CAAC,OAAR,CAAiB,KAAjB,EAA0B;QAAE,OAAA,EAAQ,GAAG,CAAC,OAAd;QAAuB,OAAA,EAAQ,GAAG,CAAC;MAAnC,CAA1B;MACA,IAAoF,IAAC,CAAA,KAArF;QAAA,OAAO,CAAC,GAAR,CAAa,mBAAb,EAAkC;UAAE,OAAA,EAAQ,GAAG,CAAC,OAAd;UAAuB,OAAA,EAAQ,GAAG,CAAC;QAAnC,CAAlC,EAAA;OAJF;;EATE;;EAiBJ,KAAM,CAAE,GAAF,CAAA;AACR,QAAA,IAAA,EAAA,IAAA,EAAA;IAAI,IAAA,GAAO,IAAC,CAAA,OAAD,CAAU,GAAV;IACP,IAAA,GAAO,IAAC,CAAA,OAAD,CAAU,GAAV;IACP,GAAA,GAAO,MAAM,CAAC,QAAQ,CAAC,QAAhB,GAA2B,IAA3B,GAAkC,MAAM,CAAC,QAAQ,CAAC;IACzD,GAAA,IAAa,GAAG,CAAC,OAAJ,KAAe,MAArB,GAAiC,EAAjC,GAAyC,GAAA,GAAM,GAAG,CAAC;IAC1D,IAA4B,GAAG,CAAC,OAAJ,KAAiB,MAA7C;MAAA,GAAA,IAAO,GAAA,GAAM,GAAG,CAAC,QAAjB;;IACA,IAA4B,GAAG,CAAC,OAAJ,KAAiB,MAA7C;MAAA,GAAA,IAAO,GAAA,GAAM,GAAG,CAAC,QAAjB;;IACA,IAAoC,IAAA,KAAU,MAA9C;MAAA,GAAA,IAAO,GAAA,GAAM,OAAN,GAAoB,KAA3B;;IACA,IAAoC,IAAA,KAAU,MAA9C;MAAA,GAAA,IAAO,GAAA,GAAM,WAAN,GAAoB,KAA3B;KAPJ;;IASI,MAAM,CAAC,OAAO,CAAC,SAAf,CAA0B,CAAA,CAA1B,EAA8B,EAA9B,EAAkC,GAAlC;WACA;EAXI;;EAaN,KAAM,CAAE,IAAF,CAAA;AACR,QAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,KAAA,EAAA;IAAI,GAAA,GAAc,CAAA;IACd,GAAA,GAAc,IAAI,GAAJ,CAAQ,IAAR;IACd,IAAA,GAAc,GAAG,CAAC,YAAY,CAAC,GAAjB,CAAqB,MAArB;IACd,QAAA,GAAc,GAAG,CAAC,YAAY,CAAC,GAAjB,CAAqB,UAArB;IACd,KAAA,GAAc,GAAG,CAAC,QAAQ,CAAC,KAAb,CAAmB,GAAnB;IACd,GAAG,CAAC,MAAJ,GAAc;IACd,GAAG,CAAC,OAAJ,GAAiB,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,KAAK,CAAC,CAAD,CAAhB,CAAH,GAA6B,KAAK,CAAC,CAAD,CAAlC,GAA2C;IACzD,GAAG,CAAC,OAAJ,GAAiB,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,KAAK,CAAC,CAAD,CAAhB,CAAH,GAA6B,KAAK,CAAC,CAAD,CAAlC,GAA2C;IACzD,GAAG,CAAC,OAAJ,GAAiB,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,KAAK,CAAC,CAAD,CAAhB,CAAH,GAA6B,KAAK,CAAC,CAAD,CAAlC,GAA2C;IACzD,GAAG,CAAC,OAAJ,GAAiB,YAAH,GAA6B,IAA7B,GAA2C;IACzD,GAAG,CAAC,OAAJ,GAAiB,gBAAH,GAA6B,QAA7B,GAA2C;IACzD,GAAG,CAAC,KAAJ,GACU,GAAG,CAAC,OAAJ,KAAiB,MAAzB,GAAqC,MAArC,GACQ,GAAG,CAAC,OAAJ,KAAiB,MAApB,GAAgC,MAAhC,GACgC;IACvC,IAAoE,IAAC,CAAA,KAArE;MAAA,OAAO,CAAC,GAAR,CAAa,aAAb,EAA4B;QAAE,GAAA,EAAI,IAAN;QAAY,GAAZ;QAAgB,GAAhB;QAAqB,KAAA,EAAM;MAA3B,CAA5B,EAAA;;WACA;EAjBI;;EAmBN,UAAW,CAAE,GAAF,CAAA;AACb,QAAA;IAAI,OAAA,GAAU;IACV,IAAG,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,MAAX,CAAH;MACE,IAAuB,IAAC,CAAA,GAAG,CAAC,OAAL,CAAa,GAAG,CAAC,OAAjB,EAAyB,IAAC,CAAA,UAA1B,CAAvB;QAAA,OAAA,GAAU,GAAG,CAAC,MAAd;;MACA,IAAoB,GAAG,CAAC,OAAJ,KAAe,MAAf,IAA0B,GAAG,CAAC,KAAJ,KAAa,MAA3D;QAAA,OAAA,GAAU,OAAV;;MACA,IAAoB,GAAG,CAAC,OAAJ,KAAe,MAAf,IAA0B,GAAG,CAAC,KAAJ,KAAa,MAA3D;QAAA,OAAA,GAAU,OAAV;OAHF;KAAA,MAAA;MAKE,OAAA;AAAU,gBAAO,GAAG,CAAC,KAAX;AAAA,eACH,MADG;mBACS,GAAG,CAAC;AADb,eAEH,MAFG;mBAES,GAAG,CAAC;AAFb,eAGH,MAHG;mBAGS,GAAG,CAAC;AAHb;mBAIS,GAAG,CAAC;AAJb;WALZ;;WAUA;EAZS;;EAcX,OAAQ,CAAE,GAAF,CAAA;WACN,IAAC,CAAA,UAAD,CAAa,IAAC,CAAA,UAAD,CAAY,GAAZ,CAAb,EAA+B,KAA/B;EADM;;EAGR,OAAQ,CAAE,GAAF,CAAA;IACN,IAAG,IAAC,CAAA,GAAG,CAAC,OAAL,CAAa,GAAG,CAAC,OAAjB,EAAyB,IAAC,CAAA,UAA1B,CAAH;aAA8C,IAAC,CAAA,UAAD,CAAY,GAAG,CAAC,OAAhB,EAA9C;KAAA,MAAA;aAA4E,OAA5E;;EADM;;EAGR,MAAO,CAAE,OAAF,EAAW,OAAX,CAAA;AACT,QAAA;IAAI,OAAA,GAAU,IAAC,CAAA,UAAD,CAAa,OAAb,EAAsB,KAAtB;WACV,OAAA,KAAW;EAFN,CArIT;;;EA0IE,OAAQ,CAAE,OAAF,EAAW,KAAX,CAAA;IACN,IAAU,IAAC,CAAA,OAAD,CAAS,OAAT,EAAiB,KAAjB,CAAV;AAAA,aAAA;;IACA,IAAC,CAAA,KAAK,CAAC,OAAD,CAAN,GAAkB;EAFZ;;EAKR,OAAQ,CAAE,OAAF,CAAA;IACN,IAAG,IAAC,CAAA,OAAD,CAAS,OAAT,EAAiB,IAAjB,CAAH;aAA+B,IAAC,CAAA,KAAK,CAAC,OAAD,EAArC;KAAA,MAAA;aAAoD,CAAA,EAApD;;EADM;;EAGR,UAAW,CAAE,OAAF,EAAW,OAAX,EAAoB,QAApB,CAAA;AACb,QAAA,GAAA,EAAA,IAAA,EAAA;IAAI,IAAU,OAAA,KAAW,MAArB;AAAA,aAAA;;AACA;IAAA,KAAA,UAAA;;;MACE,IAAI,CAAC,IAAL,GAAsB,GAAA,KAAO,QAAnC;MACM,IAAwC,qBAAxC;QAAA,QAAQ,CAAC,GAAD,CAAK,CAAC,IAAd,GAAqB,GAAA,KAAO,QAA5B;;IAFF;EAFS;;EAOX,UAAW,CAAE,OAAF,EAAW,MAAI,KAAf,CAAA;AACb,QAAA,GAAA,EAAA,IAAA,EAAA;IAAI,IAAiB,CAAK,IAAC,CAAA,OAAD,CAAS,OAAT,EAAiB,GAAjB,CAAtB;AAAA,aAAO,OAAP;;AACA;IAAA,KAAA,UAAA;;;MACE,IAAc,IAAI,CAAC,IAAnB;AAAA,eAAO,IAAP;;IADF;WAEA;EAJS;;EAMX,OAAQ,CAAE,OAAF,EAAW,OAAX,EAAoB,MAAI,IAAxB,CAAA;IACN,IAAM,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,OAAX,CAAA,IAAwB,IAAC,CAAA,OAAD,CAAS,OAAT,CAA9B;MACG,IAAG,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,OAAX,CAAA,IAAwB,sCAA3B;eACE,KADF;OAAA,MAAA;QAGE,IAA6G,GAA7G;UAAA,OAAO,CAAC,GAAR,CAAa,2BAAb,EAA0C;YAAE,OAAA,EAAQ,OAAV;YAAmB,OAAA,EAAQ,OAA3B;YAAoC,KAAA,EAAM;cAAA,OAAA,EAAS;YAAT;UAA1C,CAA1C,EAAA;;eACA,MAJF;OADH;KAAA,MAAA;MAOE,IAAuF,GAAvF;QAAA,OAAO,CAAC,GAAR,CAAa,2BAAb,EAA6C;UAAE,OAAA,EAAQ,OAAV;UAAmB,OAAA,EAAQ;QAA3B,CAA7C,EAAA;;aACA,MARF;;EADM;;EAWR,OAAQ,CAAE,OAAF,EAAW,OAAX,EAAoB,MAAI,KAAxB,CAAA;IACN,IAAG,IAAC,CAAA,OAAD,CAAS,OAAT,EAAiB,GAAjB,CAAA,IAA0B,sCAA7B;aACE,IAAC,CAAA,KAAK,CAAC,OAAD,CAAS,CAAC,OAAD,EADjB;KAAA,MAAA;MAGE,OAAO,CAAC,KAAR,CAAe,wBAAf,EAAyC;QAAE,OAAA,EAAQ,OAAV;QAAmB,OAAA,EAAQ;MAA3B,CAAzC;aACA,OAJF;;EADM;;EAOR,UAAW,CAAE,OAAF,CAAA;IACT,IAAG,IAAC,CAAA,GAAG,CAAC,OAAL,CAAa,OAAb,EAAqB,IAAC,CAAA,UAAtB,CAAH;aAA0C,IAAC,CAAA,UAAD,CAAY,OAAZ,EAA1C;KAAA,MAAA;aAAoE,OAApE;;EADS;;EAGX,OAAQ,CAAE,OAAF,EAAW,MAAI,KAAf,CAAA;AACV,QAAA;IAAI,GAAA,GAAM,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,OAAX,CAAA,IAAwB,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,IAAC,CAAA,KAAK,CAAC,OAAD,CAAjB;IAC9B,IAA8E,CAAI,GAAJ,IAAY,GAA1F;MAAA,OAAO,CAAC,GAAR,CAAa,eAAb,EAA8B;QAAE,OAAA,EAAQ,OAAV;QAAmB,GAAA,EAAI,GAAvB;QAA4B,KAAA,EAAM,IAAC,CAAA;MAAnC,CAA9B,EAAA;;WACA;EAHM;;EAKR,OAAQ,CAAE,GAAF,EAAO,KAAP,EAAc,eAAa,KAA3B,CAAA,EAAA;IACN,IAAG,YAAH;aACE,GAAG,CAAC,KAAJ,KAAa,KAAb,IAAuB,IAAC,CAAA,OAAD,CAAS,GAAG,CAAC,OAAb,EAAqB,IAArB,EADzB;KAAA,MAAA;aAGE,GAAG,CAAC,KAAJ,KAAa,MAHf;;EADM;;EAMR,KAAM,CAAG,OAAH,CAAA;IACJ,IAAG,2BAAH;aAAyB,IAAC,CAAA,KAAK,CAAC,OAAD,CAAS,CAAC,IAAI,CAAC,MAA9C;KAAA,MAAA;aAAyD,CAAA,EAAzD;;EADI;;EAGN,KAAM,CAAG,OAAH,EAAY,OAAZ,CAAA;IACJ,IAAG,2BAAH;aAAyB,IAAC,CAAA,KAAK,CAAC,OAAD,CAAS,CAAC,IAAI,CAAC,KAAK,CAAC,OAAD,CAAS,CAAC,MAA7D;KAAA,MAAA;aAAwE,CAAA,EAAxE;;EADI,CAlMR;;;EAsME,KAAM,CAAC,EAAD,CAAA;WACJ,IAAI,OAAJ,CAAa,CAAC,OAAD,CAAA,GAAA;aAAa,UAAA,CAAY,OAAZ,EAAqB,EAArB;IAAb,CAAb;EADI,CAtMR;;;;;EA4ME,MAAO,CAAE,OAAF,CAAA;WACL,IAAC,CAAA,GAAG,CAAC,OAAL,CAAc,OAAd,EAAuB,IAAC,CAAA,SAAxB;EADK;;EAGP,aAAc,CAAE,KAAF,CAAA;AAChB,QAAA;IAAI,IAAiB,CAAI,IAAC,CAAA,GAAG,CAAC,KAAL,CAAW,MAAX,CAArB;AAAA,aAAO,cAAP;;IACA,IAAA,GAAO,MAAM,CAAC,MAAP,CAAe,CAAA,CAAf,EAAmB,KAAnB,EADX;;WAGI;EAJY;;EAMd,OAAQ,CAAE,IAAF,EAAQ,IAAR,EAAc,IAAd,EAAoB,IAApB,CAAA;IACN,IAA2B,kBAA3B;MAAA,IAAI,CAAC,IAAD,CAAM,CAAC,KAAX,GAAmB,KAAnB;;IACA,IAA2B,kBAA3B;MAAA,IAAI,CAAC,IAAD,CAAM,CAAC,IAAX,GAAmB,KAAnB;;IACA,IAAI,CAAC,IAAD,CAAJ,GAAa;MAAE,KAAA,EAAM,IAAR;MAAc,IAAA,EAAK,IAAnB;MAAyB,KAAA,EAAM,IAA/B;MAAqC,IAAA,EAAK;IAA1C;IACb,IAAI,CAAC,IAAD,CAAM,CAAC,KAAX,GAAmB;IACnB,IAAI,CAAC,IAAD,CAAM,CAAC,IAAX,GAAmB;WACnB;EANM;;AAvNV;;AA+NA,OAAA,QAAe;;AAlOf",
  "sourcesContent": [
    "\nimport Build from '../util/Build.js'\nimport Dir   from './Dir.js'\n\nclass Nav\n\n  constructor:( @stream, @mix, @batch={}, @komps=null, @pages={} ) ->\n    @dirs       = { west:true, east:true, north:true, south:true, prev:true, next:true }\n    @navs       = if @komps then @addInovToNavs( @komps ) else null\n    @touch      =  null\n    @build      =  new Build( @batch )\n    @dir        =  new Dir( @ )\n    @source     = 'None'\n    @level      = 'None' # set to either Comp Prac or Disp by Tocs.vue\n    @compKey    = 'None'\n    @pracKey    = 'None'\n    @dispKey    = 'None'\n    @pageKey    = 'None'\n    @inovKey    = 'None' # Only used by Tabs to Tocs.vue and Comp.vue\n    @choice     = 'None'\n    @checked    = false\n    @warnMsg    = 'None'\n    @debug      =  false\n    @pubs       = []\n    @urls       = []\n    @tabs       = {}\n    @museLevels = ['Comp','Prac','Disp']\n    @museComps  = ['Home','Prin','Info','Know','Wise','Cube','Test']\n    @museInovs  = ['Info','Know','Wise','Soft','Data','Scie','Math']\n    @musePlanes = ['Info','Know','Wise']\n\n  pub:( msg, isReplay=false ) ->\n    changeView = @viewChange( msg )\n    obj = @toObj( msg )\n    url = @toUrl( obj )\n    console.log('Nav.pub()', obj )\n    @pubs.push(obj) if not isReplay and obj.compKey isnt 'Test'\n    @urls.push(url) if not isReplay and obj.compKey isnt 'Test'\n    @stream.publish( 'View', obj ) if changeView\n    @stream.publish( 'Nav',  obj )\n    return\n\n  viewChange:( obj ) ->\n    obj.compKey = @compKey if not @mix.isDef(obj.compKey)\n    obj.pracKey = @pracKey if not @mix.isDef(obj.pracKey)\n    obj.dispKey = @dispKey if not @mix.isDef(obj.dispKey)\n    change = not ( obj.compKey is @compKey and obj.pracKey is @pracKey and obj.dispKey is @dispKey )\n    console.log( 'Nav.viewChange()', { change:change, compObj:obj.compKey, compNav:@compKey,\n    pracObj:obj.pracKey, pracNav:@pracKey, dispObj:obj.dispKey, dispNav:@dispKey, } ) if @debug and change\n    change\n\n  toObj:( msg ) ->\n    @set( msg )\n    @source   = 'None' if not msg.source?\n    @pracKey  = 'None' if @level is   'Comp'\n    @dispKey  = 'None' if @level isnt 'Disp'\n    obj = { source:@source, level:@level, compKey:@compKey, pracKey:@pracKey, dispKey:@dispKey }\n    obj.pageKey = @objPage( obj )\n    obj.inovKey = @objInov( obj )\n    obj.choice  = @choice  if @mix.isApp('Jitter')\n    obj.checked = @checked if @mix.isApp('Jitter')\n    obj.warnMsg = @warnMsg if @warnMsg isnt 'None'\n    @tab( obj ) # Publisn pageKey and inovKey to tabs\n    obj\n\n  set:( msg ) ->\n    for own key, val of msg\n      @[key] = val\n    return\n\n  tab:( obj ) ->\n\n    if @mix.isDef(obj.pageKey)\n      @pageKye  = obj.pageKey\n      tabsKey   = @getTabsKey(obj)\n      @setPageKey( tabsKey, obj.pageKey, {} ) # Short message on 'Tab' subject\n      @stream.publish( 'Tab',           { compKey:tabsKey, pageKey:obj.pageKey } )\n      console.log( 'Nav.set() pageKey', { compKey:tabsKey, pageKey:obj.pageKey } ) if @debug\n\n    if @mix.isDef(obj.inovKey)\n      @inovKey  = obj.inovKey\n      @setPageKey( obj.compKey, obj.inovKey, {} ) # Short message on 'Tab' subject\n      @stream.publish( 'Tab',   { compKey:obj.compKey, pageKey:obj.inovKey } )\n      console.log( 'Nav.set() inovKey', { compKey:obj.compKey, inovKey:obj.inovKey } ) if @debug\n\n    return\n\n  toUrl:( obj ) ->\n    page = @objPage( obj )\n    inov = @objInov( obj )\n    url  = window.location.protocol + '//' + window.location.host\n    url += if    obj.compKey is 'Home' then '' else '/' + obj.compKey\n    url += '/' + obj.pracKey if obj.pracKey isnt 'None'\n    url += '/' + obj.dispKey if obj.dispKey isnt 'None'\n    url += '?' + 'page='     + page  if page isnt 'None'\n    url += '&' + 'innovate=' + inov  if inov isnt 'None'\n    # console.log( 'Nav.toUrl()', url ) if @debug\n    window.history.pushState( {}, '', url )\n    url\n\n  toPub:( href ) =>\n    obj         = {}\n    url         = new URL(href)\n    page        = url.searchParams.get(\"page\")\n    innovate    = url.searchParams.get(\"innovate\")\n    paths       = url.pathname.split('/')\n    obj.source  = 'Url'\n    obj.compKey = if @mix.isStr(paths[1]) then paths[1] else 'Home'\n    obj.pracKey = if @mix.isStr(paths[2]) then paths[2] else 'None'\n    obj.dispKey = if @mix.isStr(paths[3]) then paths[3] else 'None'\n    obj.pageKey = if page?                then page     else 'None'\n    obj.inovKey = if innovate?            then innovate else 'None'\n    obj.level =\n      if      obj.dispKey isnt 'None' then 'Disp'\n      else if obj.pracKey isnt 'None' then 'Prac'\n      else                                 'Comp'\n    console.log( 'Nav.toPub()', { url:href, obj,obj, paths:paths } ) if @debug\n    obj\n\n  getTabsKey:( obj ) ->\n    tabsKey = 'None'\n    if @mix.isApp('Muse')\n      tabsKey = obj.level if @mix.inArray(obj.compKey,@musePlanes)\n      tabsKey = 'Prin' if obj.compKey is 'Prin' and obj.level is 'Comp'\n      tabsKey = 'Prac' if obj.compKey is 'Prin' and obj.level is 'Prac'\n    else\n      tabsKey = switch obj.level\n        when 'Comp' then obj.compKey\n        when 'Prac' then obj.pracKey\n        when 'Disp' then obj.dispKey\n        else             obj.compKey\n    tabsKey\n\n  objPage:( obj ) ->\n    @getPageKey( @getTabsKey(obj), false )\n\n  objInov:( obj ) ->\n    if @mix.inArray(obj.compKey,@musePlanes) then @getPageKey(obj.compKey) else 'None'\n\n  isShow:( tabsKey, pageKey ) ->\n    pageNav = @getPageKey( tabsKey, false )\n    pageKey is pageNav\n\n  # An important indicator of when Comps and Tabs are instanciated\n  setTabs:( tabsKey, pages ) ->\n    return if @hasTabs(tabsKey,false )\n    @pages[tabsKey] = pages\n    return\n\n  getTabs:( tabsKey ) ->\n    if @hasTabs(tabsKey,true) then @pages[tabsKey] else {}\n\n  setPageKey:( tabsKey, pageKey, propTabs ) ->\n    return if pageKey is 'None'\n    for own key, page  of @pages[tabsKey]\n      page.show           = key is pageKey  # Update nav pages\n      propTabs[key].show = key is pageKey  if propTabs[key]? # Also update Tabs.vue propTabs because it is a copy\n    return\n\n  getPageKey:( tabsKey, log=false ) ->\n    return 'None' if not  @hasTabs(tabsKey,log)\n    for own  key,   page  of @pages[tabsKey]\n      return key if page.show\n    'None'\n\n  hasPage:( tabsKey, pageKey, log=true ) ->\n    if    @mix.isDef(tabsKey) and @hasTabs(tabsKey)\n       if @mix.isDef(pageKey) and @pages[tabsKey][pageKey]?\n         true\n       else\n         console.log( 'Nav.hasPage() bad pageKey', { tabsKey:tabsKey, pageKey:pageKey, pages:getTabs:(tabsKey) } ) if log\n         false\n    else\n      console.log( 'Nav.hasPage() bad tabsKey',    { tabsKey:tabsKey, pageKey:pageKey } ) if log\n      false\n\n  getPage:( tabsKey, pageKey, log=false ) ->\n    if @hasTabs(tabsKey,log) and @pages[tabsKey][pageKey]?\n      @pages[tabsKey][pageKey]\n    else\n      console.error( 'Nav.getPage() bad page', { tabsKey:tabsKey, pageKey:pageKey } )\n      'None'\n\n  getInovKey:( tabsKey ) ->\n    if @mix.inArray(tabsKey,@musePlanes) then @getPageKey(tabsKey) else 'None'\n\n  hasTabs:( tabsKey, log=false ) ->\n    has = @mix.isDef(tabsKey) and @mix.isDef(@pages[tabsKey])\n    console.log( 'Nav.hasTabs()', { tabsKey:tabsKey, has:has, pages:@pages } ) if not has and log\n    has\n\n  isMyNav:( obj, level, checkPageKey=false ) ->  # @routes, @routeNames,\n    if checkPageKey\n      obj.level is level and @hasTabs(obj.pageKey,true)\n    else\n      obj.level is level\n\n  pracs:(  compKey ) ->\n    if @batch[compKey]? then @batch[compKey].data.pracs else {}\n\n  disps:(  compKey, pracKey ) ->\n    if @batch[compKey]? then @batch[compKey].data.pracs[pracKey].disps else {}\n\n  # Called as await sleep(2000) inside an asych function\n  sleep:(ms) ->\n    new Promise( (resolve) => setTimeout( resolve, ms ) )\n\n  # --- Innovate --- Inov in one place\n\n  # Across the board Inov detector for compKey pageKey and route\n  isInov:( compKey ) ->\n    @mix.inArray( compKey, @museInovs )\n\n  addInovToNavs:( komps ) ->\n    return komps? if not @mix.isApp('Muse')\n    navs = Object.assign( {}, komps )\n    #avs = @insInov( navs, @museInovs )\n    navs\n\n  insInov:( navs, prev, inov, next ) ->\n    navs[prev].south = inov if navs[prev]?\n    navs[prev].next  = inov if navs[next]?\n    navs[inov] = { north:prev, prev:prev, south:next, next:next }\n    navs[next].north = inov\n    navs[next].prev  = inov\n    navs\n\nexport default Nav\n\n###\n  set:( msg, isReplay ) ->\n    if isReplay\n       if msg.pageKey isnt 'None'\n          tabsKey = @getTabsKey(msg)\n          @setPageKey( tabsKey, msg.pageKey, {} ) # Short message on 'Tab' subject\n          @stream.publish( 'Tab',           { compKey:tabsKey, pageKey:msg.pageKey } )\n          console.log( 'Nav.set() pageKey', { compKey:tabsKey, pageKey:msg.pageKey } ) if @debug\n       if msg.inovKey isnt 'None'\n         @setPageKey( msg.compKey, msg.inovKey, {} ) # Short message on 'Tab' subject\n         @stream.publish( 'Tab',   { compKey:msg.compKey, pageKey:msg.inovKey } )\n         console.log( 'Nav.set() inovKey', { compKey:msg.compKey, inovKey:msg.inovKey } ) if @debug\n    for own key, val of msg\n      @[key] = val\n    return\n###\n"
  ]
}