{
  "version": 3,
  "file": "Worker.js",
  "sourceRoot": "../../../src/base/util",
  "sources": [
    "Worker.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nclass Worker\n  \n  constructor:() ->\n    @logPub    = false\n    @cacheUrls = @toCacheUrls( Worker.cacheObjs )                        #    1200 = 20 min\n    @cacheOpts = { headers:{ 'Cache-Control': 'public, max-age=1200' } } # 2592000 = 30 days\n    # console.log( 'Worker.self', self )\n    @addEventListeners()\n  \n  toCacheUrls:( objs ) ->\n    urls = []\n    urls.push( obj.url ) for own key, obj of objs\n    urls\n    \n  publish:( name, status, obj=null ) =>\n    if @logPub\n      if obj?\n        console.log( name, status, obj )\n      else\n        console.log( name, status )\n    return\n  \n  onCatch:( name, status, error ) =>\n    console.log( name, status, error )\n    return\n  \n  onInstall:( event ) =>\n    event.waitUntil(\n      caches.open( Worker.cacheName )\n        .then( (cache) =>\n          @publish( 'Install', '------ Open ------' )\n          for own key, obj of Worker.cacheObjs\n            fetch( obj.url, @cacheOpts )\n              .then( (response) =>\n                @publish( '  Install', response.url )\n                return cache.put( response.url, response ) )\n          return )\n        .catch( (error) =>\n          @onCatch( 'Install', 'Error', error ); return ) )\n    return\n  \n  onInstallAll:( event ) =>\n    event.waitUntil(\n      caches.open( Worker.cacheName )\n        .then( (cache) =>\n          @publish( 'InstallAll', 'Success', { cacheName:Worker.cacheName } )\n          return cache.addAll(@cacheUrls) )\n        .catch( (error) =>\n          @onCatch( 'InstallAll', 'Error', error ); return ) )\n    return\n  \n  cacheUrlNotNeeded:( cacheUrl ) =>\n    cacheUrl is '/pub/app/muse/roll.js'\n  \n  onActivate:( event ) =>\n    event.waitUntil(\n      caches.keys()\n        .then( ( @cacheUrls ) =>\n          return @cacheUrls.filter( (cacheUrl) => @cacheUrlNotNeeded(cacheUrl) ) )\n        .then( (cachesToDelete) =>\n          return Promise.all(cachesToDelete.map( (cacheToDelete) =>\n            return caches.delete(cacheToDelete) ) ) )\n        .then(() =>\n           self.clients.claim()\n           @publish( 'Activate', 'Called' ) )\n        .catch( (error) =>\n          @onCatch( 'Activate', 'Error', error )\n          return ) )\n    return\n  \n  onFetch:( event ) =>\n    console.log( 'Worker.onFetch()', event.request.url )\n    return if event.request.cache is 'only-if-cached' and event.request.mode isnt 'same-origin'\n    return if event.request.url   is 'http://localhost:3000/index.html?source=pwa'\n    event.respondWith(\n      caches.open( Worker.cacheName )\n        .then( (cache) =>\n          return cache.match( event.request, {ignoreSearch:true} ).then( (response) =>\n            return response or fetch( event.request,  @cacheOpts ).then( (response) =>\n              cache.put( event.request, response.clone() )\n              @publish( 'Fetch', event.request.url  )\n              return response ) ) )\n        .catch( (error) =>\n          @onCatch( 'Fetch', event.request.url, error  ) ) )\n    return\n  \n  onGet:( event ) =>\n    return if event.request.method isnt 'GET'\n    console.log('Worker.onGet()', event.request )\n    event.respondWith(caches.match(event.request)\n      .then((cached) =>\n        networked = fetch(event.request)\n         .then((response) =>\n           cacheCopy = response.clone()\n           caches.open(cacheName)\n            .then( (cache) =>\n               cache.put( event.request, cacheCopy )\n               @publish( 'Get', 'Success' ) )\n           return response )\n        .catch((error) =>\n           caches.match(offlinePage)\n           @onCatch( 'Get', 'Error', error  ) )\n        return cached or networked ) )\n    return\n  \n  # For now this is just an example\n  # Needs to be registered\n  onPush:( event ) =>\n    return if event.data.text() isnt @pushTag\n    event.waitUntil( caches.open( cacheName ) )\n      .then( (cache) =>\n        return fetch( pushUrl ).then( (response) =>\n          cache.put(  pushUrl, response.clone() )\n          json = response.json()\n          @publish( 'Push', pushTag, { json:json } )\n          return json ) )\n    return\n   \n  # MDN says that sync may not progress to W3C standard\n  # Needs to be registered\n  onSync:( event ) =>\n    return if event.tag isnt @syncTag\n    event.waitUntil( caches.open(cacheSync).then( (cache) =>\n      return cache.add(syncUrl) ) )\n    return\n  \n  addEventListeners:() -> \n    self.addEventListener('install',  @onInstall  )\n    self.addEventListener('activate', @onActivate )\n    self.addEventListener('fetch',    @onFetch    )\n    #elf.addEventListener('fetch',    @onGet      )\n    #elf.addEventListener('push',     @onPush     )\n    #elf.addEventListener('sync',     @onSync     )\n    return\n\nWorker.cacheName = 'Axiom'\n\nWorker.cacheObjs = {}\n\nWorker.cacheObjs2 = {\n  IndexHtml: { name:'IndexHtml', status:0, url:'/index.html'}\n  Favicon:   { name:'Favicon',    status:0, url:'/favicon.icon'},\n  IndexJS:   { name:'IndexJS',   status:0, url:'/index.js'  }\n}\n\nWorker.cacheObjsMuse = {\n  MainHtml:     { name:'MainHtml',     status:0, url:'/pub/app/main/main.html'     }\n  MuseHtml:     { name:'MuseHtml',     status:0, url:'/pub/app/muse/muse.html'     }\n  MuseJS:       { name:'MuseJS',       status:0, url:'/pub/app/muse/Muse.js'       }\n  MuseHome:     { name:'MuseHome',     status:0, url:'/pub/app/muse/Home.js'       }\n  MuseMani:     { name:'MuseMani',     status:0, url:'/pub/app/muse/manifest.webmanifest' }\n  AugmHtml:     { name:'AugmHtml',     status:0, url:'/pub/app/augm/augm.html'     }\n  AugmJS:       { name:'AugmJS',       status:0, url:'/pub/app/augm/augm.js'       }\n  AugmHome:     { name:'AugmHome',     status:0, url:'/pub/app/augm/home.js'       }\n  AugmMani:     { name:'AugmMani',     status:0, url:'/pub/app/augm/manifest.webmanifest' }\n  JitterHtml:   { name:'JitterHtml',   status:0, url:'/pub/app/jitter/jitter.html' }\n  JitterJS:     { name:'JitterJS',     status:0, url:'/pub/app/jitter/jitter.js'   }\n  JitterMani:   { name:'JitterMani',   status:0, url:'/pub/app/jitter/manifest.webmanifest' }\n  JitterHome:   { name:'JitterHome',   status:0, url:'/pub/vue/jitter/home.js'     }\n  JitterBody:   { name:'JitterBody',   status:0, url:'/pub/vue/jitter/body.js'     }\n  JitterBrew:   { name:'JitterBrew',   status:0, url:'/pub/vue/jitter/brew.js'     }\n  JitterChoice: { name:'JitterChoice', status:0, url:'/pub/vue/jitter/choice.js'   }\n  JitterDrink:  { name:'JitterDrink',  status:0, url:'/pub/vue/jitter/drink.js'    }\n  JitterFlavor: { name:'JitterFlavor', status:0, url:'/pub/vue/jitter/flavor.js'   }\n  JitterRoast:  { name:'JitterRoast',  status:0, url:'/pub/vue/jitter/roast.js'    }\n  MBoxHtml:     { name:'MBoxHtml',     status:0, url:'/pub/app/mbox/mbox.html'     }\n  ChromeIcon:   { name:'ChromeIcon',   status:0, url:'/pub/css/icons/android-chrome-512x512.png' }\n  Roboto:       { name:'Roboto',       status:0, url:'/pub/css/font/roboto/Roboto.css' }\n  RobotoTTF:    { name:'RobotoTTF',    status:0, url:'/pub/css/font/roboto/Roboto-Regular.ttf'      }\n  FaSolidWoff2: { name:'FaSolidWoff2', status:0, url:'/pub/css/font/fontawesome/fa-solid-900.woff2' }\n  FaBrandWoff2: { name:'FaBrandWoff2', status:0, url:'/pub/css/font/fontawesome/fa-brans-400.woff2' }\n  FaInit:       { name:'FaInit',       status:0, url:'/pub/css/font/fontawesome/init.css' }\n  FontAweJS:    { name:'FontAweJS',    status:0, url:'/pub/base/draw/FontAwe.js' }\n  Mixin:        { name:'Mixin',        status:0, url:'/pub/base/vue/Mixin.js'    }\n  Stream:       { name:'Stream',       status:0, url:'/pub/base/util/Stream.js'  }\n  Cache:        { name:'Cache',        status:0, url:'/pub/base/util/Cache.js'   }\n  UtilJS:       { name:'UtilJS',       status:0, url:'/pub/base/util/Util.js'    }\n  AccessJS:     { name:'AccessJS',     status:0, url:'/pub/base/util/Access.js'  }\n  VisJS:        { name:'VisJS',        status:0, url:'/pub/base/draw/Vis.js'     }\n  NavJS:        { name:'NavJS',        status:0, url:'/pub/base/nav/Nav.js'      }\n  BuildJS:      { name:'BuildJS',      status:0, url:'/pub/muse/conn/Build.js'   }\n  RollJS:       { name:'RollJS',       status:0, url:'/pub/app/muse/roll.js'     }\n  PrinJson:     { name:'PrinJson',     status:0, url:'/pub/data/muse/Prin.json'  }\n  RowsJson:     { name:'RowsJson',     status:0, url:'/pub/data/muse/Rows.json'  }\n  InfoJson:     { name:'InfoJson',     status:0, url:'/pub/data/muse/Info.json'  }\n  KnowJson:     { name:'KnowJson',     status:0, url:'/pub/data/muse/Know.json'  }\n  WiseJson:     { name:'WiseJson',     status:0, url:'/pub/data/muse/Wise.json'  }\n  DataJson:     { name:'DataJson',     status:0, url:'/pub/data/muse/Data.json'  }\n}\n\n\nWorker.create = ( cacheName, cacheObjs, logPub ) ->\n  worker = new Worker( cacheName, cacheObjs, logPub )\n  if worker is false then {}\n  # console.log( \"Worker.create()\", cacheName )\n  return\n\nWorker.create( Worker.cacheName, Worker.cacheObjs, true )\n\n# export default Worker\n"
  ]
}