{
  "version": 3,
  "file": "Access.js",
  "sourceRoot": "../../src/util",
  "sources": [
    "Access.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\nimport Util from './Util.js'\n\nclass Access\n\n  @refine:( data ) ->\n    data.pracs = {}\n    for pkey, prac of data when Util.isChild(pkey)\n      data.pracs[pkey] = prac\n      #prac.data        = data\n      prac['name']     = pkey if not prac['name']?\n      prac.disps = {}\n      for dkey, disp of prac  when Util.isChild(dkey)\n        prac.disps[dkey] = disp\n        disp.prac        = prac\n        disp['name']     = dkey if not disp['name']?\n        disp.areas = {}\n        for akey, area of disp  when Util.isChild(akey)\n          disp.areas[akey] = area\n          area.disp        = disp\n          area['name']     = akey if not area['name']?\n          area.items = {}\n          for ikey, item of area when Util.isChild(ikey)\n            area.items[ikey] = item\n            item.area        = area\n            item['name']     = ikey if not item['name']?\n            item.bases = {}\n            for bkey, base of item when Util.isChild(bkey)\n              item.bases[bkey] = base\n              base.item        = item\n              base['name']     = bkey if not base['name']?\n      prac.dispKeys = Object.keys( prac.disps )\n    data.pracKeys   = Object.keys( data.pracs )\n    data\n\n  # Merges principles and innovations into comp practices\n  @mergePracs = ( batch, srcKey, comps ) ->\n    srcs = batch[srcKey].data.pracs\n    for comp in comps\n      for own   key, src of srcs\n        batch[comp].data.pracs[key] = src\n    return\n\n  # Build a new Innovative Plane\n  @buildInnov = ( batch, innv, comp ) ->\n    innvs = batch[innv].data\n    pracs = batch[comp].data\n    for key in ['Team','Discover','Adapt','Benefit','Change','Govern']\n      innvs[key] = Object.assign( {}, pracs[key] )\n      innvs[key].plane = innv\n    Access.refine( innvs )\n    return\n\n  # ---- Read JSON with batch async\n\n  @batchRead:( batch, callback, create=null ) ->\n    for  own key, obj of batch\n      @batchJSON( obj,   batch, callback, create )\n    return\n\n  @batchComplete:( batch ) ->\n    for own key, obj of batch\n      return false if not obj['data']\n    true\n\n  # \"Access-Control-Request-Headers\": \"*\", \"Access-Control-Request-Method\": \"*\"\n\n  @batchJSON:( obj, batch, callback, refine=null ) ->\n    url = Access.toUrl(obj.url)\n    opt = { mode:'no-cors', headers:{ 'Content-Type':'application/json' } }\n    fetch( url, opt )\n      .then( (response) =>\n        return response.json() )\n      .then( (data) =>\n        obj['data']     = if Util.isFunc(refine) then refine( data ) else data\n        callback( batch ) if Access.batchComplete( batch ) )\n      .catch( (error) =>\n        console.error( \"Data.batchJSON()\", { url:url, error:error } ) )\n    return\n\n  @asyncJSON:( urla, callback ) ->\n    url = Access.toUrl(urla)\n    # console.log( 'Data.asyncJSON()', urla, url )\n    fetch( url )\n      .then( (response) =>\n        response.json() )\n      .then( (data) =>\n        callback( data ) )\n      .catch( (error) =>\n        console.error( \"Data.asyncJSON()\", { url:url, error:error } ) )\n    return\n\n  @planeData:( batch, plane ) ->\n    batch[plane].data[plane]\n\n  @toUrl:(url) ->\n    # console.log( 'Data.toUrl', { url:url, local:Data.local, serve:Data.serve, href:window.location.href })\n    if      window.location.href.includes('3000') then Access.local+url\n    else if window.location.href.includes('5000') then Access.serve+url\n    else                                               Access.hosted+url\n           \n  # ------ Quick JSON read ------\n\n  @read:( url, callback ) ->\n    if Util.isObj( url )\n      Access.readFile(  url, callback )\n    else\n      Access.asynsJson( url, callback )\n    return\n\n  @readFile:( fileObj, doJson ) ->\n    fileReader = new FileReader()\n    fileReader.onerror = (e) -> console.error( 'Store.readFile', fileObj.name, e.target.error )\n    fileReader.onload  = (e) -> doJson( JSON.parse(e.target.result) )\n    fileReader.readAsText( fileObj )\n    return\n\n  @saveFile:( data, fileName ) ->\n    htmlBlob = new Blob( [data], { type:\"text/html;charset=utf-8\" } )\n    htmlUrl  = window['URL'].createObjectURL(htmlBlob)\n    downloadLink          = document.createElement(\"a\")\n    downloadLink.href     = htmlUrl\n    downloadLink.download = fileName\n    document.body.appendChild(downloadLink)\n    downloadLink.click()\n    document.body.removeChild(downloadLink)\n    return\n\nAccess.local   =  \"../pub/data/\"\nAccess.serve   =  \"../data/\"\nAccess.hosted  =  \"./data/\"\nAccess.cssDir  = 'css/'  # /css in /pub\n\n\nexport default Access"
  ]
}