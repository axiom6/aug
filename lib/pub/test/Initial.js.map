{
  "version": 3,
  "file": "Initial.js",
  "sourceRoot": "../../src/test",
  "sources": [
    "Initial.coffee"
  ],
  "names": [],
  "mappings": "AACA,IAAA,OAAA;EAAA;;AAAA,OAAA;EAAS,MAAT;CAAA,MAAA;;AAEA,OAAO,MAAP,MAAA;;AAIM;;EAAN,MAAA,QAAA;IAKkB,OAAR,KAAQ,CAAC,IAAD,CAAA;MACd,OAAO,CAAC,GAAR,CAAa,iBAAb,EAAgC,IAAhC;MACA,OAAO,CAAC,IAAR,GAAe;MACf,OAAO,CAAC,IAAR,CAAA;IAHc;;IAMC,OAAT,IAAS,CAAA,CAAA;AACnB,UAAA,QAAA,EAAA,UAAA,EAAA,UAAA,EAAA,KAAA,EAAA,SAAA,EAAA;MAAI,QAAA,GAAkB,CAAC,YAAD,EAAc,YAAd,EAA2B,aAA3B;MAClB,SAAA,GAAkB;QAAE,SAAA,EAAU,KAAZ;QAAmB,OAAA,EAAQ,KAA3B;QAAkC,QAAA,EAAS;MAA3C;MAClB,OAAO,CAAC,MAAR,GAAkB,IAAI,MAAJ,CAAY,QAAZ,EAAsB,SAAtB,EAFtB;;MAKI,MAAM,CAAC,UAAP,CAAmB;QAAE,OAAA,EAAQ,IAAV;QAAgB,OAAA,EAAQ,IAAxB;QAA8B,OAAA,EAAQ,KAAtC;QAA6C,KAAA,EAAM,KAAnD;QACnB,aAAA,EAAc,YADK;QACS,aAAA,EAAc,YADvB;QACqC,cAAA,EAAe;MADpD,CAAnB;MAGA,MAAM,CAAC,YAAP,CAAqB,OAAO,CAAC,MAA7B;MACA,OAAO,CAAC,MAAM,CAAC,SAAf,CAA0B,aAA1B,EAAyC,SAAzC,EAAoD,CAAC,OAAD,CAAA,GAAA;eAAa,OAAO,CAAC,SAAR,CAAkB,OAAlB;MAAb,CAApD;MACA,QAAA,GAAW,MAAM,CAAC,KAAP,CAAa,eAAb;MACX,IAAG,QAAH;QACE,UAAA,GAAa;QACb,UAAA,GAAa;QACb,OAAO,CAAC,KAAR,GAAgB,MAAM,CAAC,MAAP,CAAc,UAAd,CAAyB,CAAC,MAA1B,GAAmC,MAAM,CAAC,MAAP,CAAc,UAAd,CAAyB,CAAC;QAC7E,OAAO,CAAC,KAAR,GAAgB;QAChB,OAAO,CAAC,gBAAR,GAA2B;QAC3B,OAAO,CAAC,kBAAR,CAA4B,UAA5B;QACA,OAAO,CAAC,kBAAR,CAA4B,UAA5B,EAPF;OAAA,MAAA;QASE,KAAA,GAAQ,CAAC,mCAAD,EAAqC,8BAArC,EAAoE,gCAApE;QACR,MAAM,CAAC,YAAP,CAAqB,KAArB,EAVF;;IAZe;;IA2BY,OAArB,kBAAqB,CAAE,OAAF,CAAA;AAC/B,UAAA,QAAA,EAAA,IAAA,EAAA;MAAI,IAA+F,IAAC,CAAA,KAAhG;QAAA,OAAO,CAAC,GAAR,CAAa,6BAAb,EAA4C;UAAE,OAAA,EAAQ,OAAV;UAAmB,IAAA,EAAK;QAAxB,CAA5C,EAAA;;AACA;MAAA,KAAA,eAAA;;;qBACE,OAAO,CAAC,IAAD,CAAP,CAAA,CAAe,CAAC,IAAhB,CAAsB,KAAA,CAAC,QAAD,CAAA,GAAA;UACpB,IAAmC,IAAC,CAAA,KAApC;YAAA,OAAO,CAAC,GAAR,CAAa,IAAb,EAAqB,QAArB,EAAA;;UACA,MAAM;UACN,OAAO,CAAC,KAAR;UACA,IAAG,OAAO,CAAC,KAAR,KAAiB,OAAO,CAAC,KAAzB,IAAmC,CAAI,OAAO,CAAC,gBAAlD;YACG,OAAO,CAAC,gBAAR,GAA2B;YAC3B,OAAO,CAAC,MAAM,CAAC,OAAf,CAAwB,YAAxB,EAAsC,MAAM,CAAC,OAAP,CAAA,CAAtC;YACA,MAAM,CAAC,GAAP,CAAY,MAAM,CAAC,OAAP,CAAA,CAAZ,EAHH;;QAJoB,CAAtB;MADF,CAAA;;IAF2B;;IAaT,OAAZ,SAAY,CAAC,OAAD,CAAA;AACtB,UAAA,GAAA,EAAA,CAAA,EAAA,GAAA,EAAA,IAAA,EAAA,KAAA,EAAA,GAAA;;MACI,GAAA,GAAY,QAAQ,CAAC,cAAT,CAAwB,SAAxB;MACZ,KAAA,GAAY,OAAO,CAAC,KAAR,CAAe,IAAf;MACZ,KAAA,uCAAA;;QACE,GAAA,GAAM,QAAQ,CAAC,aAAT,CAAwB,KAAxB;QACN,GAAG,CAAC,KAAJ,GAAY;QACZ,GAAG,CAAC,MAAJ,CAAY,IAAZ;QACA,GAAG,CAAC,MAAJ,CAAY,GAAZ;MAJF;IAJkB;;EAnDtB;;EAEE,OAAO,CAAC,OAAR,GAAkB;;EAClB,OAAO,CAAC,KAAR,GAAkB;;;;;;AA2DpB,OAAA,QAAe",
  "sourcesContent": [
    "\nimport { tester } from './Tester.js'\n\nimport Stream from '../base/util/Stream.js'\n\n# git remote set-url origin 'https://axiom-muse:Axiom66#@github.com/axiom6-muse/viz.git'\n\nclass Initial\n\n  Initial.appName = 'Initial'\n  Initial.debug   = false\n\n  Initial.start = (href) ->\n    console.log( \"Initial.start()\", href )\n    Initial.href = href\n    Initial.init()\n    return\n\n  Initial.init =   () ->\n    subjects        = [\"TestStatus\",\"TestString\",\"TestSummary\"]\n    streamLog       = { subscribe:false, publish:false, subjects:subjects }\n    Initial.stream  = new Stream( subjects, streamLog )\n\n    # For illustration purposes, because we are just resseting the defaults\n    tester.setOptions( { testing:true, archive:true, verbose:false, debug:false,\n    statusSubject:\"TestStatus\", stringSubject:\"TestString\", summarySubject:\"TestSummary\" } )\n\n    tester.injectStream( Initial.stream )\n    Initial.stream.subscribe( 'TestSummary', \"Initial\", (summary) => Initial.onSummary(summary) )\n    inViteJS = tester.isDef(`import.meta.env`)\n    if inViteJS\n      modulesLib = `import.meta.glob(\"/lib/**/*-unit.js\")`\n      modulesPub = `import.meta.glob(\"/pub/**/*-unit.js\")`\n      Initial.total = tester.toKeys(modulesLib).length + tester.toKeys(modulesPub).length\n      Initial.count = 0\n      Initial.summaryPublished = false\n      Initial.runUnitTestsViteJS( modulesLib )\n      Initial.runUnitTestsViteJS( modulesPub )\n    else\n      paths = [\"/lib/pub/base/util/Stream-unit.js\",\"/lib/pub/test/Tester-unit.js\",\"/lib/pub/base/draw/Vis-unit.js\"]\n      tester.runUnitTests( paths )\n    return\n\n  # This is vite.js dependent with import.meta.glob() and its dynamic await importer\n  # Can't pass glob patterns like \"/pub/xx/x-unit.js\"\n  Initial.runUnitTestsViteJS = ( modules ) ->\n    console.log( \"Tester.runUnitTestsViteJS()\", { modules:modules, glob:\"/lib/**/*-unit.js\" } ) if @debug\n    for own path, importer of modules\n      modules[path]().then( (importer) =>\n        console.log( path,   importer ) if @debug\n        await importer\n        Initial.count++\n        if Initial.count is Initial.total and not Initial.summaryPublished\n           Initial.summaryPublished = true\n           Initial.stream.publish( \"TestSummay\", tester.summary() )\n           tester.log( tester.summary() )\n        return )\n\n  Initial.onSummary = (summary) =>\n    # console.log( \"Initial.onSummary(summary)\", summary )\n    sum       = document.getElementById('summary')\n    lines     = summary.split( \"\\n\" )\n    for line in lines\n      div = document.createElement( 'div' )\n      div.style = \"font-size:3vmin;\"\n      div.append( line )\n      sum.append( div  )\n    return\n\nexport default Initial\n"
  ]
}