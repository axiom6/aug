{
  "version": 3,
  "file": "Mix.js",
  "sourceRoot": "../../src/navi",
  "sources": [
    "Mix.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nimport Type     from \"../test/Type.js\"\nimport { vis  } from '../draw/Vis.js'\n\nclass Mix extends Type\n\n  constructor:( Main ) ->\n    super()\n    Mix.Main =  Main\n    @batch   = Main.Batch\n    @debug = false\n\n  hasElem: (elem)    -> elem? and elem['clientHeight']? and elem['clientHeight'] > 0\n\n  getElem: ($refs, name) ->  # Not called\n    elem = $refs[name]\n    console.log('Mix.getElem() $refs[name]   ', $refs, elem, name)\n    if not @hasElem(elem) and elem[0]?\n      elem = $refs[name][0]\n      console.log('Mix.getElem() $refs[name][0]', $refs, elem, name)\n      if not @hasElem(elem)\n        console.error('Mix.hasElem() unable to find elem in $refs[name]', name)\n        console.dir($refs)\n        elem = null\n    else\n      console.error('Mix.hasElem() unable to find elem in $refs[name][0]', name)\n      elem = null\n    elem\n\n  styleObj: (ikwObj, fontSize = null) ->\n    hsv = [30, 90, 90]\n    if   @isDef(ikwObj)\n      if @isDef(ikwObj.hsv)\n        hsv = ikwObj.hsv\n      else if @isDef(ikwObj.dir)\n        hsv = switch ikwObj.dir\n          when 'west'  then [195, 90, 70]\n          when 'north' then [ 90, 90, 90]\n          when 'east'  then [ 30, 60, 90]\n          when 'south' then [ 60, 90, 90]\n          else\n            [30, 90, 90]\n    style = { backgroundColor:vis.css(hsv)}\n    style['fontSize'] = fontSize + 'rem' if fontSize?\n    console.log( \"Mix.styleObj()\", { ikwObj:ikwObj, style:style, hsv:hsv } ) if @debug\n    style\n\n  toRgbaHsv: (hsv) ->\n    vis.rgb(hsv)\n\n  # Main\n  app: () ->\n    Mix.Main.appName\n  isApp: ( appName ) ->\n    Mix.Main.appName is appName\n  routeNames:() ->\n    if Mix.Main.routeNames? then Mix.Main.routeNames else []\n  subscribe: (subject, source, onMethod) ->\n    Mix.Main['stream'].subscribe(subject, source, onMethod)\n    return\n  publish: (subject, object) ->\n    Mix.Main['stream'].publish(subject, object)\n    return\n  fontSize: (scale) ->  # JavaScript font-size the matches themeFS in theme.less\n    fs = if Mix.Main.fontSize? then Mix.Main.fontSize else 2\n    sc = if scale?               then scale else 1\n    sc * fs + 'vmin'\n  fontSizeCss: (scale) ->\n    {fontSize: @fontSize(scale)}\n\n  # Not working with MatnBox\n  promiseScript:(src) ->\n    new Promise( (resolve) =>\n      scripts    = document.getElementsByTagName('script');\n      for scriptx in scripts\n        # console.log( 'Mix.addScript() scriptx src', scriptx.src )\n        return if scriptx.src.includes(src)\n      # console.log( 'Mix.addScript() adding', src )\n      script = document.createElement('script')\n      document.head.appendChild(script)\n      script.async = false\n      script.defer = false\n      script.src = src\n      resolve )\n\n  # Not working with MatnBox. With CoffeeScript await make addScript() async\n  addScript:( src ) ->\n    await @promiseScript(src)\n    return\n\n  delScript:( src ) ->\n    scripts    = document.getElementsByTagName('script');\n    for  script in scripts\n      if script.src.includes(src)\n        console.log( 'Mix.delScript()', script.src ) if @debug\n        document.head.removeChild(script)\n        return\n    return\n\n  # Nav\n  nav: () ->\n    console.error('Mix.nav() null') if not Mix.Main.nav?\n    Mix.Main.nav\n  touch: () ->\n    console.error('Mix.touch() null') if not Mix.Main.touch?\n    Mix.Main.touch\n  isNav: () ->\n    Mix.Main.nav?\n\n  # Batch\n  isBatch:(compk) ->\n    Mix.Main.Batch[compk]?\n  data:( name ) ->\n    if @isBatch(name)\n      Mix.Main.Batch[name].data\n    else\n      console.error( 'Mix.data() unknown data name', name )\n      {}\n  opts:( key ) ->\n    # console.log( \"Mix.opts\",  key, Mix.Main.Batch['Main'].data[key] )\n    Mix.Main.Batch['Main'].data[key]\n  prin: ()  ->\n    Mix.Main.Batch['Prin'].data.pracs\n  comps: (compk) ->\n    Mix.Main.Batch[compk].data.comps\n  kompsTocs: () ->   # For Tocs.vue\n    Mix.Main.komps\n  subset: (compk, filter) ->\n    filts = {}\n    for own key, prac of @pracs(compk) when filter(prac)\n      filts[key] = prac\n    filts\n  conns: (compk) ->\n    filter = if compk isnt 'Prin' then (prac) -> prac.row isnt 'Dim' else (prac) -> prac.row is 'Dim'\n    @subset(compk, filter)\n  pracs: (compk) ->\n    Mix.Main.Batch[compk].data.pracs\n  disps: (compk, prack) ->\n    Mix.Main.Batch[compk].data[prack].disps\n  areas: (compk, prack, dispk) ->\n    Mix.Main.Batch[compk].data[prack][dispk].areas\n  items: (compk, prack, dispk, areak) ->\n    Mix.Main.Batch[compk].data[prack][dispk][areak].items\n  bases: (compk, prack, dispk, areak, itemk) ->\n    Mix.Main.Batch[compk].data[prack][dispk][areak][itemk].bases\n\n  compObject:( compKey ) ->\n    obj = {}\n    if       Mix.Main.Batch[compKey]?\n       obj = Mix.Main.Batch[compKey].data.pracs\n    else if compKey isnt 'Home' and compKey isnt 'Defs'\n      console.error( 'Mix.compObject() bad compKey', compKey )\n    obj\n\n  inovObject:( compKey, inovKey ) ->\n    pracs = {}\n    if @isBatch(compKey)\n      compPracs = @pracs(compKey)\n      if @isDef(inovKey) and inovKey isnt compKey and @isBatch(inovKey)\n        inovPracs = @pracs(inovKey)\n        console.log( 'Mix.inovObject() inovPracs', { inovKey:inovKey, inovPracs:inovPracs } ) if @debug\n        for key, prac of compPracs\n          if prac.column is 'Innovate' and prac.row isnt 'Dim'\n            inovPrac = @getPrac(inovPracs,prac.row,prac.column,inovKey)\n            pracs[inovPrac.name] = inovPrac\n          else\n            pracs[key] = prac\n      else\n        pracs = compPracs\n    else if compKey isnt \"Home\" and compKey isnt \"Defs\"\n      console.error('Mix.inovObject() bad compKey or inovKey', { compKey:compKey, inovKey:inovKey } )\n    pracs\n\n  pracObject:( compKey,  inovKey, pracKey ) ->\n    pracs = @inovObject( compKey, inovKey )\n    prac  = {}\n    if pracs[pracKey]?\n      prac = pracs[pracKey]\n    else\n      console.error('Mix.pracObject() unknown pracKey', { compKey:compKey, inovKey:inovKey, pracKey:pracKey, pracs:pracs } )\n    prac\n\n  sectObject: ( pracKey, dispKey  ) ->\n    talkObjs = @compObject('Talk' )\n    talkObj = talkObjs[pracKey]\n    console.log( 'Mix.sectObj()', { talkObj:talkObj, talkKey:pracKey, sectKey:dispKey } ) # , sectObj:sectObj\n    sectObjs = @compObject(talkObj.comp)\n    talkObj.keys = if talkObj.keys?  then talkObj.keys else @childKeys(sectObjs)\n    dispKey = if dispKey is 'none' or not @inArray(dispKey,talkObj.keys) then @keys(sectObjs)[0] else dispKey\n    sectObj = sectObjs[dispKey]\n    if not sectObj?\n      console.error( 'Nav.sectObject null', { pracKey:pracKey, dispKey:dispKey } )\n      sectObj = {}\n    sectObj.src = talkObj.src\n    sectObj.name = dispKey\n    sectObj.peys = talkObj.keys\n    sectObj.keys = if sectObj.keys?  then sectObj.keys else @childKeys(sectObj)\n    sectObj = Object.assign( {}, sectObj ) if sectObj.imgsIdx isnt @nav().imgsIdx  # Trigger reactive render\n    sectObj.imgsIdx = @nav().imgsIdx\n    sectObj\n\n  presObject:( sectObj, presKey ) ->\n    presKey = if presKey is 'none' and sectObj.keys[0]? then sectObj.keys[0] else presKey\n    pageObj = null\n    if presKey isnt 'none' and sectObj[presKey]?\n      pageObj = sectObj[presKey]\n      pageObj.src = sectObj.src\n      pageObj.name = presKey\n      pageObj.peys = sectObj.keys\n      pageObj.keys = if pageObj.keys?  then pageObj.keys else @childKeys(pageObj)\n      console.log( 'Mix.pageObj()', { dispKey:sectObj.name, presKey:presKey, pageObj:pageObj } )\n    pageObj\n\n  dataObject: (sectObj, presKey ) ->\n    dataObj = null\n    if sectObj.type is 'Prac'\n      dataObj = @pracObject( sectObj.src, sectObj.name )\n    else if sectObj.type is 'Disp' and presKey isnt 'none'\n      dataObj = @dispObject(sectObj.src, 'none', sectObj.name, presKey  )\n    dataObj\n\n  dispObject:( compKey, inovKey, pracKey, dispKey ) ->\n    disp = {}\n    pracs = @inovObject( compKey, inovKey )\n    if pracs[pracKey]?\n      prac = pracs[pracKey]\n      if prac[dispKey]?\n        disp = prac[dispKey]\n      else\n        console.error( 'Mix.dispObject() unknown dispKey', { compKey:compKey, inovKey:inovKey, pracKey:pracKey, dispKey:dispKey } )\n    else\n      console.error( 'Mix.dispObject() unknown pracKey',   { compKey:compKey, inovKey:inovKey, pracKey:pracKey, dispKey:dispKey } )\n    disp\n\n  getPrac: ( pracs, row, column, inovKey ) ->\n    for key, prac of pracs\n      return prac if prac.row is row and prac.column is column\n    console.error( 'Mix.getPrac() missing prac for', { inovKey:inovKey, row:row, column:column } )\n    {}\n\n  isPageKeyComp: (pageKey) ->\n    pageKey is 'Info' or pageKey is 'Data' # @app() is 'Muse' and\n\n  removeElem:( msg, elem, nextTick, closure=null ) ->\n    nextTick( () =>\n      if @isDef(elem)\n        closure() if closure?\n        @removeElems(elem)\n      else\n        console.error( msg, \"Mix.removeElem() elem undefined\" ) )\n    return\n\n  removeElems:( elem ) ->\n    while @isDef(elem) and @isDef(elem.firstChild)\n      elem.removeChild(elem.firstChild)\n    return\n\n  createElem:( msg, elem, nextTick, closure ) ->\n    nextTick( () =>\n      if @isDef(elem)\n        closure()\n      else\n        console.error( msg, \"Mix.createElem() elem undefined\" ) )\n    return\n\n\n  appendImgsHW:( src, elem ) ->\n    hw  = {}\n    img = new Image();\n    img.onload = () ->\n      hw.iw = this.width\n      hw.ih = this.height\n      hw.ew = elem['clientWidth']\n      hw.eh = elem['clientHeight']\n      hw.r  = Math.min( hw.ew/hw.iw, hw.eh/hw.ih )\n      img.width  = hw.iw * hw.r\n      img.height = hw.ih * hw.r\n      img.alt    = 'alt'\n      # console.log( 'Mix.appendImgsHW()', hw:hw, { w:img.width, h:img.height } )\n      elem.children[0].remove() if elem.children[0]?\n      elem.append( img )\n    img.src = src\n\n  # aspectHW:( )\n\nexport default Mix\n"
  ]
}