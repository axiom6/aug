{
  "version": 3,
  "file": "Dir.js",
  "sourceRoot": "../../src/navi",
  "sources": [
    "Dir.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nclass Dir\n\n  constructor:( @nav ) ->\n    @komps = @nav.komps\n    @build = @nav.build\n    @debug = true\n    @keyEvents()\n\n  keyEvents:() ->\n    keyDir = (event) =>\n      switch event.key\n        when 'ArrowRight' then @dir( 'east'  )\n        when 'ArrowLeft'  then @dir( 'west'  )\n        when 'ArrowDown'  then @dir( 'south' )\n        when 'ArrowUp'    then @dir( 'north' )\n        when '+'          then @dir( 'next'  )\n        when '-'          then @dir( 'prev'  )\n    document.addEventListener('keydown', (event) => keyDir(event) )\n    return\n\n  dir:( direct ) =>\n    if @nav.isApp('Muse')\n      switch @nav.level\n        when 'Comp' then @dirComp( direct )\n        when 'Prac' then @dirPrac( direct )\n        when 'Disp' then @dirDisp( direct )\n        else             @dirComp( direct )\n    else if direct is 'west' or direct is 'east'\n      @dirPage( direct )\n    else\n      @dirComp( direct )\n    return\n\n  dirComp:( dir ) ->\n    return if not @komps? or @nav.compKey is 'none'\n    compDir = @komps[@nav.compKey][dir]\n    msg         = {}\n    msg.source  = \"#{'Nav.dirComp'}(#{dir})\"\n    msg.compKey = compDir\n    @nav.pub( msg )\n    return\n\n  dirPrac:( dir ) ->\n    return if @nav.compKey is 'none' or @nav.pracKey is 'none'\n    pracs = @build.getPractices( @nav.compKey )\n    prac  =  @build.adjacentPractice( pracs[@nav.pracKey], dir )\n    msg         = {}\n    msg.source  = \"#{'Nav.dirPrac'}(#{dir})\"\n    msg.pracKey = prac.name\n    msg.compKey = @build.getPlane( msg.pracKey )\n    if @debug\n      console.log( \"Dir.dirPrac()\",  { dir:dir, nextPrac:msg.pracKey, prevPrac:@nav.pracKey,\n      nextComp:msg.compKey, prevComp:@nav.compKey, prac:prac } )\n    @nav.pub( msg )\n    return\n\n  dirDisp:( dir ) ->\n    return if @nav.compKey is 'none' or @nav.pracKey is 'none'  or @nav.dispKey is 'none'\n    msg         = {}\n    msg.source  = \"#{'Nav.dirDisp'}(#{dir})\"\n    msg.pracKey = @build.adjacentPractice( @nav.pracKey, dir )\n    msg.compKey = @build.getPlane( msg.pracKey )\n    msg.dispKey = @build.getDispKey( @nav.compKey, msg.compKey, @nav.pracKey, msg.pracKey, @nav.dispKey )\n    @nav.pub( msg ) if msg.dispKey isnt 'none'\n    return\n\n  dirPage:( dir ) ->\n    return if @nav.compKey is 'none' or @nav.pageKey is 'none'\n    pages   = @nav.toKeys( @nav.pages[@nav.compKey] )\n    return if pages.length <= 1\n    pageIdx = -1\n    i       =  0\n    for i in [0...pages.length] when pages[i].name is @nav.pageKey\n      pageIdx = i\n    if      dir is \"next\"\n      pageIdx = if pageIdx < pages.length-1 then pageIdx + 1 else 0\n    else if dir is \"prev\"\n      pageIdx = if pageIdx is 0 then pages.length-1 else pageIdx - 1\n    msg        = {}\n    msg.source  = \"#{'Nav.dirPage'}(#{dir})\"\n    msg.pageKey = pages[pageIdx].key\n    @nav.pub( msg )\n    return\n\nexport default Dir"
  ]
}