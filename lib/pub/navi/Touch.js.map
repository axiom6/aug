{
  "version": 3,
  "file": "Touch.js",
  "sourceRoot": "../../src/navi",
  "sources": [
    "Touch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nclass Touch\n\n  constructor:( @stream, @nav ) ->\n    @nav.touch    = @\n    @elem         = null\n    @debug        = true\n    @reset()          # \"tabs-tab\",\"disp-comp\",\"west\",\"east\",\"south\",\"north\",\"cen\"\n    @touchClasses    = []\n    @touchOutClasses = []\n\n  reset:() ->\n    @beg = null\n    @pnt = null\n\n  listen:( elem, touchClasses, touchOutClasses=[]  ) ->\n    if @debug\n      console.log( 'Touch.listen()', touchOutClasses )\n    @elem            = elem\n    @touchClasses    = touchClasses\n    @touchOutClasses = touchOutClasses\n    @elem.addEventListener( 'pointerdown',   @start,  false )\n    @elem.addEventListener( 'pointerup',     @up,     false )\n    @elem.addEventListener( 'pointerleave',  @leave,  false )\n    @elem.addEventListener( 'pointercancel', @cancel, false )\n    @elem.addEventListener( 'dblclick',      @double, false )\n    #elem.addEventListener( 'pointerout',    @out,    false )\n    return\n\n  start:(  event ) =>\n    # event.preventDefault()\n    inTouch  = @nav.inArray( event.target.className, @touchClasses    )\n    outTouch = @nav.inArray( event.target.className, @touchOutClasses )\n    if @debug\n       console.log( 'Touch.start()',\n       { target:event.target.className, inTouch:inTouch, outTouch:outTouch, outs:@touchOutClasses } )\n    # return if not inTouch\n    return   if outTouch\n    if not ( event.touches? and event.touches.length > 1 )\n      @elem.setPointerCapture( event.pointerId )\n    @beg = event\n    @pnt = @coord( event, {} )\n    @elem.addEventListener( 'pointermove', @movit, false )\n    if @debug\n      console.log( 'Touch.start()', { target:event.target.className, inTouch:inTouch } )\n    return\n\n  movit:( event ) =>\n    # event.preventDefault()\n    pnt  = if @pnt? then @pnt else {}\n    @pnt = @coord( event, pnt )\n    return\n\n  coord:( event, pnt ) ->\n    if event.targetTouches?                    # Prefer touch points\n       pnt.x = event.targetTouches[0].clientX\n       pnt.y = event.targetTouches[0].clientY\n    else                                      # Either Mouse event or Pointer Event\n       pnt.x = event.clientX\n       pnt.y = event.clientY\n    if @debug\n      console.log( 'Touch.movit()', { x:pnt.x, y:pnt.y, touches:event.targetTouches? } )\n    return pnt\n\n  leave:( event ) =>\n    @endit( event, 'leave' )\n    return\n\n  cancel:( event ) =>\n    @endit( event, 'cancel' )\n    return\n\n  out:( event ) =>\n    @endit( event, 'out' )\n    return\n\n  up:( event ) =>\n    @endit( event, 'cancel' )\n    return\n\n  endit:( event, type ) =>\n    # event.preventDefault()\n    return if event.touches? && event.touches.length > 1\n    dir  = 'none'\n    if @beg? and @pnt?\n       event.target.releasePointerCapture(event.pointerId)\n       dir = @swipeDir( @beg.clientX, @beg.clientY, @pnt.x, @pnt.y )\n       @nav.doDir( dir ) if dir isnt 'none'\n       if @debug\n         console.log( 'Touch.endit()', { type:type, x1:@beg.clientX, y1:@beg.clientY, x2:@pnt.x, y2:@pnt.y, dir:dir } )\n    @elem.removeEventListener( 'pointermove', @movit, false )\n    @reset()\n    return\n\n  double:() =>\n    @nav.doDir( \"next\" )\n\n  swipeDir:( begX, begY, endX, endY ) ->\n    dir = \"none\"\n    dx  = endX - begX\n    dy  = endY - begY\n    ax  = Math.abs(dx)\n    ay  = Math.abs(dy)\n    #if ax < 10 and ay < 10\n    #   dir = if event.shiftKey then 'prev' else 'next'\n    if      dx <  0 and ax > ay then dir = 'west'\n    else if dx >  0 and ax > ay then dir = 'east'\n    else if dy <  0 and ay > ax then dir = 'north'\n    else if dy >  0 and ay > ax then dir = 'south'\n    else                             dir = 'none'\n    dir\n\nexport default Touch "
  ]
}