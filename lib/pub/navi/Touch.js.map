{
  "version": 3,
  "file": "Touch.js",
  "sourceRoot": "../../src/navi",
  "sources": [
    "Touch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\nclass Touch\n\n  constructor:( @stream, @nav ) ->\n    @nav.touch    = @\n    @elem         = null\n    @reset()          # \"tabs-tab\",\"disp-comp\",\"west\",\"east\",\"south\",\"north\",\"cen\"\n    @touchClasses = []\n\n  reset:() ->\n    @beg = null\n    @pnt = null\n\n  listen:(  elem, touchClasses ) ->\n    @elem         = elem\n    @touchClasses = touchClasses\n    @elem.addEventListener( 'pointerdown',   @start,  false )\n    @elem.addEventListener( 'pointerup',     @up,     false )\n    @elem.addEventListener( 'pointerleave',  @leave,  false )\n    @elem.addEventListener( 'pointercancel', @cancel, false )\n    #elem.addEventListener( 'pointerout',    @out,    false )\n    return\n\n  start:(  event ) =>\n    # event.preventDefault()\n    inTouch = @nav.mix.inArray( event.target.className, @touchClasses )\n    return if not inTouch\n    if not ( event.touches? and event.touches.length > 1 )\n      @elem.setPointerCapture( event.pointerId )\n    @beg = event\n    @pnt = @coord( event, {} )\n    @elem.addEventListener( 'pointermove',   @movit, false )\n    console.log( 'Touch.start()', { target:event.target.className, inTouch:inTouch } )\n    return\n\n  movit:( event ) =>\n    # event.preventDefault()\n    pnt  = if @pnt? then @pnt else {}\n    @pnt = @coord( event, pnt )\n    return\n\n  coord:( event, pnt ) ->\n    if event.targetTouches?                    # Prefer touch points\n       pnt.x = event.targetTouches[0].clientX\n       pnt.y = event.targetTouches[0].clientY\n    else                                      # Either Mouse event or Pointer Event\n       pnt.x = event.clientX\n       pnt.y = event.clientY\n    # console.log( 'Touch.movit()', { x:pnt.x, y:pnt.y, touches:event.targetTouches? } )\n    return pnt\n\n  leave:( event ) =>\n    @endit( event, 'leave' )\n    return\n\n  cancel:( event ) =>\n    @endit( event, 'cancel' )\n    return\n\n  out:( event ) =>\n    @endit( event, 'out' )\n    return\n\n  up:( event ) =>\n    @endit( event, 'cancel' )\n    return\n\n  endit:( event, type ) =>\n    # event.preventDefault()\n    return if event.touches? && event.touches.length > 1\n    dir  = 'none'\n    if @beg? and @pnt?\n       event.target.releasePointerCapture(event.pointerId)\n       dir = @swipeDir( @beg.clientX, @beg.clientY, @pnt.x, @pnt.y )\n       @nav.dir( dir ) if dir isnt 'none'\n       console.log( 'Touch.endit()', { type:type, x1:@beg.clientX, y1:@beg.clientY, x2:@pnt.x, y2:@pnt.y, dir:dir } )\n    @elem.removeEventListener( 'pointermove', @movit, false )\n    @reset()\n    return\n\n  swipeDir:( begX, begY, endX, endY ) ->\n    dir = \"none\"\n    dx  = endX - begX\n    dy  = endY - begY\n    ax  = Math.abs(dx)\n    ay  = Math.abs(dy)\n    #if ax < 10 and ay < 10\n    #   dir = if event.shiftKey then 'prev' else 'next'\n    if      dx <  0 and ax > ay then dir = 'west'\n    else if dx >  0 and ax > ay then dir = 'east'\n    else if dy <  0 and ay > ax then dir = 'north'\n    else if dy >  0 and ay > ax then dir = 'south'\n    else                             dir = 'none'\n    dir\n\nexport default Touch "
  ]
}